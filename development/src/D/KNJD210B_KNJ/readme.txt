// kanji=漢字
// $Id: readme.txt,v 1.26 2008/12/09 06:13:38 nakamoto Exp $

KNJD210B
序列確定処理
-----
近大中学の KNJD211 を元に作成
-----
学校：自修館
-----
主なテーブル
・RECORD_AVERAGE_DAT
・RECORD_RANK_DAT
・RECORD_AVERAGE_CHAIR_DAT
・RECORD_RANK_CHAIR_DAT

2007/03/06 m-yama    3/5/全科は、それぞれ対象科目が足りない場合のみ集計しないよう修正した。
2007/05/28 o-naka
★ テーブル変更のため修正した。
-- テーブル：RECORD_RANK_DAT、RECORD_AVERAGE_DAT
-- フィールド：AVG
-- 型：DECIMAL(5,1) → DECIMAL(9,5)
★ 偏差値は、小数点第１位で計算するようにした。
2007/05/29 o-naka
★ 講座基準日を追加した
-- 初期値：学籍処理日
-- 日付チェック（未入力／学期範囲外）
★ 以下の計算処理を追加した（講座別）
-- 成績講座平均データ（record_average_chair_dat）
-- 成績講座席次データ（record_rank_chair_dat）
-- ３科・５科・全科は、処理対象外とする
-- 講座コードは、講座生徒データから講座基準日を元に抽出

2007/06/04 o-naka
★ 「選択科目を除く」処理を追加した。
-- 「選択科目を除く」チェックボックスを追加
-- 初期値はチェック有
-- 選択科目とは、科目マスタのelectdiv（選択）が '1' とする

2007/07/24 o-naka
★ デッドロックの対応。
-- １つのトランザクション内で複数のテーブルを更新する場合、
-- アルファベット順に更新するようにした。

2008/05/21 o-naka
★ 下記の通り仕様変更しました。
-- 法政・自修館は、
-- 9学期9900のvalueの序列確定処理を実行・・・・・＜現状＞
-- 法政・自修館以外は、
-- 9学期9900のscoreの序列確定処理を実行
-- ※参考
-- 名称マスタ「Z010」「00」
-- NAME1 = 'HOUSEI'・・・・法政
-- NAME1 = 'jisyukan'・・・自修館

2008/06/02 o-naka
★ 講座基準日について、学期範囲チェックの不具合を修正。
-- 取得した学期開始日・終了日が間違っていた。
★ 最高点・最低点を追加。
-- ※テーブル
-- ・RECORD_AVERAGE_CHAIR_DAT
-- ・RECORD_AVERAGE_DAT
★ ３科・５科について、智辯学園の仕様を追加。
※メール参照
Sent: Friday, May 30, 2008 5:45 PM
Subject: KNJD210Bの修正依頼

2008/06/09 o-naka   1.智辯学園の場合、3/5科は、対象科目が足りない場合でも集計する。
                    2.智辯学園（高校）の場合、合併先科目のレコードを生成する。
                    3.2番の修正をカットした。
                    4.智辯高校の仮教科処理を追加した。

2008/06/10 o-naka   1.智辯高校の仮教科処理のバグ修正。
                    2.智辯学園の場合、3/5/全科の順位は、得点ではなく平均を元にして生成する。
                    3.智辯高校の仮教科処理の仕様追加。

2008/07/09 o-naka   1.「3/5/全科の順位」ラジオボタンを追加。（1:総合点で生成 2:平均点で生成）

2008/07/18 o-naka   1.仕様変更。智辯学園の場合、REC_SUBCLASS_GROUP_DAT を参照する。

2008/07/21 o-naka   1.智辯学園（中学）の場合、全科の対象科目は、REC_SUBCLASS_GROUP_DAT を参照する。

2008/07/22 o-naka   1.智辯学園の場合、3/5科は、REC_SUBCLASS_GROUP_DAT に登録された科目を集計する。

2008/07/24 o-naka   1.「3/5/全科の順位」ラジオボタン、「2:平均点」を初期値チェックにする。

2008/09/08 o-naka   1.熊本県立の場合、合併元科目は序列確定の総合点席次および平均点席次算出から除外する。

2008/10/30 o-naka   1.智辯学園の場合、3/5/全科の生成方法を変更した。

2008/12/09  1.デッドロックの対応。頻繁に COMMIT を発行するようにした。
