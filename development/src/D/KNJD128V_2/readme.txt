// kanji=漢字

-----
学校：宮城県・常盤高校
-----

2013/06/24  1.新規。初版。
            -- 指導入力（パーツタイプ）
            2.テスト名は略称１を表示
            3.科目別設定の修正
            4.プログラムIDの変更

2013/07/12  1.修正。再修正。

2013/08/22  1.DI_CD'19','20'ウイルス/DI_CD'25','26'交止追加に伴う修正
            -- rep-attend_semes_dat.sql(rev1.9)
            -- rep-attend_subclass_dat.sql(rev1.11)
            -- v_attend_semes_dat.sql(rev1.7)
            -- v_attend_subclass_dat.sql(rev1.4)
            -- v_school_mst.sql(rev1.20)
            2.DI_CD'19','20'ウイルス/DI_CD'25','26'交止追加に伴う修正漏れ対応

2014/02/01  1.TESTITEM_MST_COUNTFLG_NEW_SDIVのSCORE_DIV’01’の時のみ、満点マスタを参照

2014/02/25  1.文言変更。指導→追指導
            2.単位認定入力の学年評価欄にも追指導のリンク設定を表示する。

2014/02/26  1.更新時、サブミットする項目使用不可

2014/02/27  1.更新時、サブミットする項目使用不可の修正漏れ

2014/02/28  1.更新時、サブミットする項目使用不可。ソース整理

2014/03/06  1.更新時のロック機能(レイヤ)を追加

2014/04/23  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効
            2.貼り付け機能の修正
                - 関数名を修正 show ⇒ showPaste
                
2014/05/29  1.更新/削除等のログ取得機能を追加

2014/07/02  1.成績が1件も入力されていない場合、RECORD_SCORE_DATのレコードは作成しない（考査ごと）

2014/09/25  1.異動者に黄色表示されない不具合修正

2015/04/08  1.合併先科目は、科目コンボの内容で、科目コードの前に、黒丸（●）を表示する。
            
2015/07/03  1.ACCESS_LOG_DETAILの更新処理をコメントアウト(宮城のDBエラーからの対策)

2015/07/30  1.講座名簿に登録されている生徒より学校校種を取得し、基本設定のコードをセットするよう修正
            2.学校校種は講座名簿に登録されている生徒ではなく、科目コンボの科目より取得してセットするよう修正
                - ただし、科目コンボがNULLの場合は名称マスタA023のNAME1のMINより取得

2016/03/29  1.成績が別講座の生徒に上書される不具合修正
            【現象】
            -- 講座1-1選択後すぐに講座1-2を選択。
            -- 講座1-2を更新すると講座1-1の生徒に上書される。
            【原因】
            -- 生徒を表示する時に、学籍番号を保持しています。
            -- 更新は、保持した学籍番号で更新しています。
            -- 上記ケースの場合、本来、保持した学籍番号は、
            -- 講座1-2の生徒になるはずなのに、講座1-1の生徒になっている。
            【対応】
            -- 生徒を表示する時に、学籍番号を保持しておくのではなく、
            -- 更新時に、学籍番号を取得し更新するように修正。

2016/06/02  1.氏名欄に学籍番号表記を追加。三重県から要望

2016/06/23  1.KNJD129Dに追指導入力の機能を追加
            -- リンク設定より、追指導入力（KNJD128V_2）をコール

2016/06/24  1.修正漏れ。機能していなかった。
            -- 成績入力完了チェックの入れ忘れ防止対策
            2.宮城県の時、成績入力完了チェックのメッセージを変更する。

2016/11/01  1.プロパティーuse_SchregNo_hyoji='1'の時、学籍番号表記

2016/11/28  1.プロパティー「use_school_detail_gcm_dat」が"1"の時の処理追加
            -- 新テーブルの管理者コントロールとテスト項目マスタを参照
            -- 課程学科コンボ追加

2017/03/29  1.KNJD129Lからのコール追加

2017/04/18  1.異動日の翌日以降は、転学、退学者は入力不可にする。
            -- 成績欄のみ
            ※ 宮城県要望
            2.異動日の翌日以降は、転学、退学者は入力不可にする。
            -- 但し、管理者（権限が更新可能）は、入力可

2017/04/20  1.管理者コントロールの基本のSCHOOL_KINDについて、混在は、MAXを取得する。
            -- 宮城県は'00'がある(古いデータ)
            2.入力窓の条件訂正

2017/04/27  1.速度改善

2017/05/16  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2017/05/17  1.前回修正の訂正

2018/10/23  1.リファクタ

2018/10/24  1.プロパティー「useSlumpSeq = 1」の時、追指導入力の2回以上（複数回）登録できるように変更
            -- 追指導回数コンボを表示
            -- RECORD_SLUMP_SEQ_SDIV_DATを参照・更新
            -- RECORD_SLUMP_SDIV_DATへ反映（追指導回数のMAXの物）
            -- 不要レコードは作成しない
            ※ record_slump_seq_sdiv_dat.sql (rev.62994)
            ※ 雲雀丘から要望

2019/03/26  1.プロパティー「useSlumpSeq = 2」かつ学年評価「9-990008」の時、合格欄を表示（チェックボックス）
            -- RECORD_SLUMP_SDIV_DATのPASS_FLGを参照・更新
            ※ rep-record_slump_sdiv_dat.sql (rev.66544)
            ※ 山村学園から要望

2019/10/01  1.CSV機能追加

2020/04/17  1.**(半角アスタリスク2個)の表示対応

2020/02/20  1.PC-Talker

2020/09/11  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/12/01  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを
              設定ファイル「prgInfo.properties」のプロパティー「csv_LastColumn」で
              切り替えるように変更

2020/12/09  1.LASTCOLUMN対策漏れの修正

2021/01/25  1.プロパティー「useSlumpSeq = 1」かつプロパティー「useSlumpSeqMaxScore = 1」の時、成績データと追指導データのMAX値（高い方）をRECORD_SLUMP_SDIV_DATへ反映する。
            ※ 関西学院から要望

2021/03/11  1.プロパティー「useSlumpSeq = 1」で関西学院の場合、追指導回数MAX値は２つまでと制限し、文言を「追指導1 → 2年再試」「追指導2 → 3年再試」に変更
