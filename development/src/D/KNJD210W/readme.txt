# kanji=漢字
# $Id: readme.txt 75807 2020-08-03 14:09:35Z maeshiro $

KNJD210W
序列確定処理
-----
学校：雲雀丘（全日制）
-----
・TESTITEM_MST_COUNTFLG_NEW_SDIV
・RECORD_RANK_SDIV_DAT

修正メモ
KNJD210V -> KNJD210W

T_SCORE_NULL ... *,**の入力のある生徒、科目 (合計点序列の対象外)
    (getRecordNullQuery)
      ベースはT_SCORE
        SCORE IS NULL AND VALUE_DI IN (*, **)  ... 得点なしかつ*入力の科目が一つ以上ある生徒
        D070 ... D070（合併）は対象外
        ELECTDIV ... 選択科目を除く場合、選択科目は対象外
        SUBCLASS_GROUP ... 3科、5科がターゲットの場合、グループ外の科目だけが*対象*
      *** 08/03 仕様をカット  D017 ... 9科がターゲットの場合、D017の科目は対象外 ***
      *** 08/03 仕様を追加　  D017 ... 9科がターゲットの場合、D017の科目のみが対象 ***
      *** 12/06 仕様をカット  D017 ... 9科がターゲットの場合、D017の科目のみが対象 ***
      *** 12/06 仕様を追加    D017 ... 9科がターゲットの場合、D017の科目は対象外 ***
        D065 ... D065の科目は対象外
        90 ... 教科コード90以上は対象外

T_SCORE_SUM ... 合計点序列の合計
    (getRecordScoreSumQuery)
      ベースはT_SCORE
        SCORE IS NOT NULL 
        SUBCLASS_GROUP ... 3科、5科がターゲットの場合、グループの科目だけが*対象*
        ELECTDIV ... 9科がターゲットの場合、選択科目を除く場合、選択科目も対象外
      *** 8/3 KNJD210Vの仕様をカット  D017 ... 9科がターゲットの場合、D017の科目は対象外 ***
        D065 ... 9科がターゲットの場合、D065の科目は対象外
        D070 ... D070（合併）は対象外

T_RANK
    (getRecordSchregQuery)
        通常科目
     union all
        ベースはT_SCORE_SUM
        T_SCORE_NULLを除く

---------------------------------------------------------------------------------------

2020/08/03  1.KNJD210V(rev. 75217)をコピー
            2.雲雀丘に不要な処理をカット
            3.KNJD210Vから名称マスタ「D017」の使用を変更
            ---  KNJD210V
            --- ・「D017」に登録された科目は合計点に含まない
            --- ・＊入力で「D017」に登録された科目なら「合計点序列の対象外とする」の対象外
            --- →＊入力で「D017」に登録された科目なら「合計点序列の対象とする」
            --- 
            ---  KNJD210W
            --- ・＊入力で「D017」に登録された科目なら「合計点序列の対象外とする」
            --- →＊入力で「D017」に登録されない科目なら「合計点序列の対象とする」

2020/12/16  1.以下の仕様で見直し
            ・「D017」の登録科目は、試験を実施しない科目。＊を入力しても、欠試とはしない。
            ・「D017」に登録されない科目は、＊を入力した場合、欠試として「合計点序列の対象外とする」。→動作変更

