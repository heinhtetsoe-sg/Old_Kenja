// kanji=漢字
// $Id: readme.txt 76273 2020-08-27 08:58:57Z arakaki $

KNJD133
成績入力（総合的な学習の時間）
-----
学校：賢者（京都）
-----
更新テーブル
RECORD_TOTALSTUDYTIME_DAT
RECORD_SCORE_DAT

2010/02/17  1.新規作成。

2010/04/09  1.KNJD133Mを元に再作成

2010/04/16  1.文言を変更(活動内容 ===> 学習内容)
            2.入力文字数を変更
            -- 学習内容(50文字X2行 ===> 25文字X2行)
            -- 評価(50文字X3行 ===> 25文字X3行)

2010/06/07  1.一括更新画面作成

2010/06/08  1.貼付け機能の追加

2010/07/26  1.CSV機能追加

2010/08/13  1.「貼付け」機能の修正(キャンセルで普通の貼付け)

2011/04/13  1.文字数チェックをバイトチェックに変更した。

2011/04/20  1.バイトチェックの修正漏れ

2011/06/30  1.成績入力（総合的な学習の時間）の学習内容、評価の入力フラグを追加
            2.prgInfo.propertiesへ対象の変数値を追加 (TOTALSTUDYACT_STUDYTIME_UseTextFlg)
            3.一括更新ボタンへフラグ追加

2011/07/01  1.プロパティー「TOTALSTUDYACT_STUDYTIME_UseTextFlg」が"1"の時の処理を変更
            -- 学習内容、評価のテキストエリアを"disable"→"readonly"に変更した。
            -- 学習内容、評価のテキストエリアの背景色をグレーに変更した。
            -- 学習内容、評価は更新しないように変更した。
            -- 一括更新ボタンを有効にした。
            -- 一括更新画面の学習内容、評価欄を非表示に変更した。（更新もしない）
            -- CSV取込の際、学習内容、評価の取り込んだ内容を表示しないようにした。

2011/12/16  1.プロパティー「useCurriculumcd」を追加した。
            -- '1'がセットされている場合は教育課程コード等を使うようにした。

2012/02/06  1.RECORD_TOTALSTUDYTIME_DATにSUBCLASSCDフィールドに伴う修正
                - 総合的な学習時間のデータは指定された科目を表示し、データ更新時は指定された科目ごとに更新する
                - 教育課程に対応した処理を追加
                - CSV エラーメッセージ内容を出力するように修正

2012/02/17  1.生徒毎に単位自動チェックボックスを追加
            -- チェックありの場合
            --     単位マスタの単位数を履修単位・修得単位にセットし更新
            -- チェックなしの場合
            --     画面の入力値を履修単位・修得単位にセットし更新

2013/08/19  1.以下の通り修正
            -- 修正前：教科コード’90’が対象
            -- 修正後：教科コード’90’と
            --         名称マスタ「D008」のNAMECD2に登録してある教科コードが対象
            -- ※常盤は、教科コート゛’94’を入力可能にする
            
2013/08/20  1.名称マスタのマスタ化に伴う修正

2013/09/03  1.CSV出力時、レコードがない場合も科目コードをセットするよう修正

2013/10/21  1.名称マスタのマスタ化に伴う修正もれ対応
                - プロパティーuseCurriculumcd = '1'の時のみ使用可能

2014/03/04  1.更新時のロック機能(レイヤ)を追加

2014/04/15  1.パーツタイプ対応のため修正
            -- プロパティuseTestCountflg = TESTITEM_MST_COUNTFLG_NEW_SDIVの時
            -- RECORD_SCORE_DATは、SCORE_DIV = '09'のSCOREを参照する。

2014/04/21  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効
            2.貼り付け機能の修正
                - 関数名を修正 show ⇒ showPaste
                
2014/05/29  1.更新/削除等のログ取得機能を追加

2014/06/10  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効
                - 一括更新画面修正もれ対応

2014/08/11  1.style指定修正

2015/01/21  1.csv取り込み失敗時に入力内容が表示されるよう修正
                - 各テキストの項目パラメータを取得する場所を変更(updateコマンド以外でも取得するようにした)

2015/03/02  1.名称マスタのマスタ化に伴う修正を一旦削除
                - プロパティ「useClassDetailDat」= '1'が立っていても、名称マスタD008を参照するよう修正

2016/06/10  1.氏名欄に学籍番号表記を追加。三重県から要望

2016/06/16  1.プロパティーuse_SchregNo_hyoji='1'の時、学籍番号表記

2016/09/19  1.科目コンボ修正
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2016/11/25  1.プロパティー「showTemp04」='1'の時、定型文を文言評価に表示する処理追加

2016/12/07  1.定型文ボタンと設定の処理を追加 

2017/04/28  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2018/07/26  1.ペーストのエラーチェック修正。validate_row_cntの第一引数をStringにキャスト

2019/01/18  1.CSV出力の文字化け修正(Edge対応)

2019/04/19  1.テキストエリアのサイズをプロパティから取得するよう修正
              ※取得時の校種は科目の校種を使用

2019/06/27  1.一覧のヘッダとデータのレイアウトくずれを修正

2019/12/20  1.ACCESS_LOG_DETAIL書込処理をコメント。(桁あふれDBエラー対応)

2020/02/28  1.値欄に「学習内容の定型文選択」「評価の定型文選択」ボタンを追加
            2.プロパティー追加：tutisyoTeikei_Button_kojinn
            --tutisyoTeikei_Button_kojinn = '1' の場合、各行に「定型文選択」のボタンを表示
            3.駒沢の場合、「評価の定型文選択」をテキストボックス(4桁)にする

2020/05/14  1.参照校種の名称マスタ（名称マスタ「D校種08」）が1件でもある場合
            -- 名称マスタ「D校種08」を参照する。

2020/08/27  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/12/01  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを
              設定ファイル「prgInfo.properties」のプロパティー「csv_LastColumn」で
              切り替えるように変更

2021/01/29  1.CSVメッセージ統一(SG社)

2021/02/02  1.定型文が１つの場合の不具合修正

2021/02/16  1.文字数チェックを修正。

2021/03/09  1.リファクタリング
            2.以下を修正
            -- 一括更新画面の文字数を固定で出力していたところをプロパティから取得して出力するよう修正
            -- 駒澤の場合で、学習内容の定型文を選択した場合、入力された文言に追加していたところを上書きするよう修正

2021/03/12  1.一括更新画面の学習内容テキストエリアのidを削除していた部分を戻すよう修正
