// kanji=漢字
// $Id: readme.txt 76262 2020-08-27 08:53:47Z arakaki $

KNJD126B
成績入力
-----
KNJD125B を元に作成
-----
学校：法政
-----

2007/05/11 o-naka 固定文字の「評価」を「評定」に変更した。
                  累積情報のＳＱＬを修正した。（不具合対応）
2007/06/01 o-naka 中間・期末を判断する条件について、間違っていたので修正した。
                  実技科目の場合、中間および調整点はレコードを作成しないようにした。
2007/07/18 o-naka
★ 成績が全てNULLの場合、レコードを作成しないようにした。
-- 中間・期末・調整点のみ

★ ６学年（高３）の場合、下記の通りに修正した。
-- １学期評定と２学期評定有りの場合
-- 　　「（１学期評定＋２学期評定）÷２」を学年評定にセット
-- １学期評定のみ有りの場合
-- 　　１学期評定をそのまま学年評定にセット
-- ２学期評定のみ有りの場合
-- 　　２学期評定をそのまま学年評定にセット

★ 履修・修得単位の処理を下記の通りに修正した。
-- 履修・修得単位が入力可かつNULLでない場合、「手入力した値」をセット
-- それ以外は、「自動計算した値」をセット
2007/07/20 o-naka
★ 以下の通りに修正した。
-- 成績入力で調整基準点のない科目を入力する場合、カーソルが調整点にあると
-- 調整点に入力なくても保存ボタンでエラーメッセージが表示される。
-- これは、調整点に点数入力があった場合のみにしてください。

2007/07/24 o-naka
■成績入力（法政）画面における学期評定自動計算について。
[山口]
今回、「数学3であるクラスの1学期評定が間違っている」という事態が起こりました。
おそらく一度保存し、再度期末あるいは調整点を入力して保存したのではと思います。
現状では再計算させるには学期評定をブランクする必要があるのですが、
これを「自動計算する・しない」の選択メッセージを表示して
入力する人に判断を任せてはどうでしょうか。
[山内]
期末と学期評定が入力できる状態において
評定がすでに入っていて、期末の点数を変更した場合
入っている評定が優先となっているので自動計算されません。
そこで、更新ボタンを押した後に自動計算をするかどうかを
ウィンドウか何かで選択できるようにしてほしいそうです。
先ほど仲本さんと話した結果、
評定が入力できる状態のときに自動計算選択ウィンドウを出す、
ということでまとまりました。

2007/12/03 o-naka
★ 仕様変更。
-- 学年評定が１～１９の場合、
-- 変更前：修得単位は、ゼロをセット
-- 変更後：修得単位は、履修単位と同じ値をセット

2008/06/04  1.機能追加。Enterキーでのカーソル移動。

2008/10/10  1.出欠累計の欠時数に保健室欠課(nouseoff)を加算追加。

2008/10/14  1.生徒を抽出する条件の日付。学籍処理日が学期範囲外の場合、学期終了日を使用する。

2009/03/10  1.３学期の評定計算にて、（小数点第一位を四捨五入）の不具合を修正。

2009/03/12  1.更新ボタンを２つに変更。更新（学期評定は自動計算する）更新（学期評定は自動計算しない）

2009/05/12  1.学校マスタのフラグ（LESSON_OFFDAYS）を参照し「休学時の欠課をカウントする」処理を追加。

2009/05/19  1.学校マスタのテーブル変更に伴う修正。「休学・公欠・出廷・忌引・出廷（伝染病）」を欠課に含める処理。

2009/05/28  1.エクセルからの貼付け機能を追加

2009/06/02  1.一覧表の行を交互に色をつける修正

2009/06/04  1.考査満点マスタを参照するよう修正

2009/06/25  1.以下の修正をした。
            -- 一覧の表示は5行ごとに色を変えるよう修正
            -- 評定・評価の「成績入力完了チェックボックス」追加(RECORD_CHKFIN_DATを更新)
            -- (ただし「更新(学期評定は自動計算する)」の場合、
            -- 未入力チェックのチェックはJavaScriptではなくて更新する時に
            -- 更新する値がなければチェックは更新しないようにしてあります。)

2009/06/25  1.入力完了の更新処理の不具合修正
            2.再度入力完了の更新処理の不具合修正

2009/07/10  1.以下の状態を修正。レイアウト調整。
            -- ・画面下のボタン類が、スクロールしないと見えない状態。
            -- ・画面下のボタン類が、少しだけ見えない状態。
            -- ※動作環境・・・OS：XP／IE7

2009/07/13  1.成績入力完了にチェックが入っていて入力欄にnullがあれば確認を求めるよう修正

2009/07/14  1.共通関数の修正に伴う修正

2009/07/24  1.成績入力完了のチェックの表示文字の修正

2009/08/03  1.以下の通り修正。
            -- 欠課数上限値が「NULL」の場合は「９９」に読み替えて処理する。

2009/08/05  1.実・法定欠課時数上限の修正。

2009/08/06  1.実・法定欠課時数上限の修正。

2009/09/07  1.メンバ変数の初期化を init() で処理するように変更。

2011/10/27  1.「参照可能」「参照可能・制限付」の時、更新ボタンを押したら、メッセージを表示する。
            -- 例：この処理は許可されていません。(MSG300)

2012/01/30  1.読み込み中は、更新ボタンをグレー（押せないよう）にする。

2012/02/14  1.スペースチェックを追加
            -- スペース文字があればエラーメッセージを表示する。
            -- 例：入力された値は不正です。「スペース」が混ざっています。

2012/03/13  1.スペースチェックをカット。
            -- スペース文字があればスペース文字を削除する。

2012/05/25  1.教育課程の追加、追加に伴う修正
                - Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応

2013/01/23  1.更新中は、他の科目・講座を選択できないようにする（グレーアウト）

2013/03/08  1.黄色表示（異動生徒）の修正。「3:出停」は除く。
            -- ※現象：インフルエンザで停止になった生徒が、現在黄色になっている。

2013/07/03  1.名称マスタのマスタ化に伴う修正

2013/08/20  1.DI_CD'19','20'ウイルス/DI_CD'25','26'交止追加に伴う修正
            -- rep-attend_semes_dat.sql(rev1.9)
            -- rep-attend_subclass_dat.sql(rev1.11)
            -- v_attend_semes_dat.sql(rev1.7)
            -- v_attend_subclass_dat.sql(rev1.4)
            -- v_school_mst.sql(rev1.20)
            2.プロパティーuseVirus、useKekkaJisu、useKekka、useLatedetail、useKoudome追加
            3.名称マスタのマスタ化に伴う修正漏れ対応

2013/12/20  1.更新時、科目/講座のコンボ使用不可

2014/02/26  1.更新時、サブミットする項目使用不可

2014/02/28  1.更新時、サブミットする項目使用不可。ソース整理

2014/03/06  1.更新時のロック機能(レイヤ)を追加

2014/04/24  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効
            2.貼り付け機能の修正
                - 関数名を修正 show ⇒ showPaste

2016/04/01  1.成績が別講座の生徒に上書される不具合修正
            -- 生徒を表示する時に、学籍番号を保持しておくのではなく、
            -- 更新時に、学籍番号を取得し更新するように修正。

2017/09/21  1.DI_CD(29-32)追加

2017/10/03  1.ATTEND_DI_CD_DAT移行
            -- attend_di_cd_dat.sql(1.2)

2020/08/27  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/11/30  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを設定ファイルの内容で切り替えるように変更
