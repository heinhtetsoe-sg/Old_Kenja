# kanji=漢字
# $Id: readme.txt 69600 2019-09-10 08:03:45Z nakamoto $

KNJD110A
出欠累積データ生成処理（改訂版）
学校：武蔵
----------
----------

2009/03/04  1.KNJD110を元にプログラムIDを変更しただけ。

2009/03/05  1.SCHREG_REGD_DETAIL の COUNTFLG='0' 集計しない生徒を処理対象外とした。
            2.出欠コード「21＝1日遅刻（無届）、22＝1日早退（無届）」の追加に伴い対応した。
            3.出欠コード「19＝出停（法定伝染病)、20＝出停（1日法定伝染病）」の追加に伴い対応した。

2009/03/06  1.授業の遅刻回数（ATTEND_SEMES_DAT.LATEDETAIL）を算出。ATTEND_SUBCLASS_DAT.LATEの合計。

2009/03/08  1.欠課回数（ATTEND_SEMES_DAT.KEKKA）を算出。欠課の数。ただし、連続は1つと数える。また、１日全て欠課の場合、欠課回数はゼロ。

2009/05/21  1.学校マスタを参照し欠課に含める。欠課回数の算出。

2009/06/29  1.処理速度改善のため修正。

2009/07/08  1.テーブル変更に伴い修正。欠課時数（ATTEND_SEMES_DAT.KEKKA_JISU）を追加。

2009/09/01  1.実授業数の欠課数上限値テーブル（SCHREG_ABSENCE_HIGH_DAT）の生成処理を追加。

2009/10/15  1.ATTEND_SEMES_DATのSICK、NOTICEの集計結果は、NONOTICEに集計して登録する。
            2.実授業数の上限値の生成処理を変更。
            -- 変更前：全て（4/1～3/31）の時間割を参照する。
            -- 変更後：実行月以下（実行月と過去）は集計済みテーブル（attend_subclass_dat）を参照し、実行月の指定日（締め日）の翌日からは時間割を参照する。
            3.名称マスタ「C040」に登録されている、年度・学期・月は、実行不可とする。
            4.上限値の設定が実授業数の場合、上限値のコメント部分を表示する。

2009/10/19  1.文言「前回実行履歴情報」追加。

2009/12/16  1.欠時数から１日欠席を除く修正
            -- ATTEND_SUBCLASS_DATのSICK,NOTICE,NONOTICE,NURSEOFFの算出SQLを修正

2009/12/28  1.欠時数の不具合を修正
            -- ATTEND_SUBCLASS_DATのSICK,NOTICE,NONOTICE,NURSEOFFの算出SQLを修正

2010/09/14  1.集計フラグを参照するテーブルを以下の通りに修正。
            -- [SCH_CHR_DATのDATADIV = '2']
            --     テスト項目マスタの集計フラグを参照する。
            -- [SCH_CHR_DATのDATADIV = '0'または'1']
            --     SCH_CHR_COUNTFLGの集計フラグを参照する。

2010/10/19  1.生成済みリストに登録者を追加

2010/10/28  1.夜間バッチの実行有無をプロパティーファイルに書き込む

2012/07/02  1. [SCH_CHR_DATのDATADIV = '3'(実力テスト)]追加に伴う修正。
            -- [SCH_CHR_DATのDATADIV = '2']
            --     テスト項目マスタの集計フラグを参照する。
            -- [SCH_CHR_DATのDATADIV = '0'または'1'または'3']
            --     SCH_CHR_COUNTFLGの集計フラグを参照する。

2012/07/03  1.教育課程の追加、追加に伴う修正
            -- Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応

2014/05/27  1.修正
            -- 勤怠コード27が入力された日付は一日出欠の授業日数にカウントしない
            -- 勤怠コード27が入力された日付校時は科目出欠の授業時数にカウントしない

2015/06/04  1.勤怠コード'28'は時間割にカウントしない

2019/09/10  1.APPOINTED_DAY_MSTに校種を追加に伴う修正
            -- プロパティー「useSchool_KindField = 1」の時、校種コンボを表示する
            -- プロパティー「useSchool_KindField = 1」の時、APPOINTED_DAY_MSTに校種を追加する
