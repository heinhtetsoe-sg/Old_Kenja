# kanji=漢字
# $Id: 20eee72e74f1360d1b83dfa6860990a21a71cd81 $

2017/07/23  1.新規作成

2018/01/16  1.修正
            2.右クリックメニュー

2018/09/25  1.全面改装中間更新

2018/10/11  1.主に高速化を行う
            2.教員、年組の切替機能
            3.不要な処理をカット

2018/10/15  1.更新系修正中間更新
            2.更新系処理修正
            3.リファクタリング

2018/10/16  1.教師縦移動の際の不正な範囲エラーの修正
            2.特別教師が正常に更新されないバグの修正
            3.イベントが加算式に増えてしまうバグの修正

2018/10/18  1.右クリックの処理カット
            2.講座反映した際、反映した講座を、講座リストから除く
            3.日付校時で移動/コピーの、※の文言を修正
            4.リファクタリング変数名変更
            5.リファクタリング変数名変更/共通処理を関数化
            6.出欠による文字色の変更処理を修正
            7.出欠による文字色の変更処理を修正
            8.タブをスペースに変換
            9.periodの文字値変換処理追加
            10.行の非表示処理テストコード追加
            11.getDipliObj2の引数に$model追加

2018/10/19  1.詳細画面から日付校時編集で講座を移動したとき、詳細画面を移動先の状態にする
            2.詳細からの移動で移動先にJump

2018/10/20  1.レイアウト変更作成中

2018/10/22  1.レイアウト変更作成
            2.コメントの追加

2018/10/24  1.レイアウト変更作成(年組)
            2.出欠情報による色分け
            3.詳細ダイアログの出欠情報修正
            4.縦軸の科目を追加
            5.縦軸の講座を追加
            6.レイアウト変更作成(講座)
            7.レイアウト変更作成(科目)

2018/10/26  1.リファクタリング縦軸関連の関数を統合
            2.特別教師の登録ができない件の修正

2018/10/29  1.リファクタリングAJAXパラメータの整理
            2.出欠情報のチェックが正常でなかったバグの修正

2018/10/31  1.施設処理作成中(更新未)

2018/11/01  1.施設処理
            2.レイアウト変更で職員名で検索掛けた後、全員左＜＜を押すと対象以外も移動する。
            3.職員名検索がIEで動かなかったので、IEでも動くよう修正
            4.初期起動の時、読込を押すまでデータ非表示。基本、通常の切り替えラジオ追加
            5.読込中は、操作できないようにする。

2018/11/02  1.基本時間割機能作成

2018/11/03  1.テンプレートコンボ修正

2018/11/05  1.基本時間割更新のポップアップ修正中

2018/11/06  1.ダイアログの×ボタンをHTMLに展開

2018/11/08  1.基本時間割の登録時に登録先を選べるように修正

2018/11/09  1.基本時間割の登録時のダイアログの選択をラジオボタンに変更
            2.入れ替え処理で重複エラーが発生してロールバックした際に不正な戻り方をするバグを修正

2018/11/12  1.特別講師の処理の高速化

2018/11/13  1.基本時間割更新時の不具合修正
            2.職員の一部削除

2018/11/14  1.移動、コピー、入替でのチェック処理

2018/11/15  1.入替の一時退避修正。KOMA_999 → KOMA_9999
            2.職員、移動/コピーを作成(出欠未対応)
            3.delキーダウンイベントで削除対象をクリアしてしまう
            4.職員、移動/コピーを作成(出欠対応)
            5.職員コピーで、更新しても増えないケースの対応
            6.基本時間割でも、職員コピーで、更新しても増えないケースの対応
            7.ポップアップの時間割種別設定追加

2018/11/16  1.時間割種別設定の対象は、同一日付/校時/講座全て
            2.ダブルクリックポップアップの背後に透明なDIVを張る(画面操作の制限)

2018/11/26  1.ロック画面の文字の中央揃え調整

2018/11/27  1.修正
            2.タグの属性名変更
            3.集計フラグ/授業形態の更新処理追加

2018/11/28  1.集計フラグ/授業形態のポップアップ作成(OK処理は未作成)
            2.集計フラグ/授業形態のポップアップ修正

2018/11/29  1.集計フラグ/授業形態の更新処理
            2.基本の時は、授業形態はなし。

2018/11/30  1.集計フラグ/授業形態のダイアログ内容をセルの内容に沿ったものを表示するように修正

2018/12/03  1.入れ替え時に縦軸の同じ講座が消えるバグの修正

2018/12/06  1.2018/12/05修正依頼分の修正(多数)

2018/12/07  1.ヘッダ部の色変え、「反映」文言変更
            2.デフォルト１週間
            3.日付上限は２週間
            4.日付校時で移動/コピーの列削除機能追加
            5.2018/12/07修正依頼分の修正(多数)

2018/12/11  1.入替時のチェック処理でsrcとtargetが反対だったので修正

2018/12/12  1.2018/12/11修正依頼分の修正(多数)

2018/12/13  1.不要な変数等を削除
            2.不要なHTMLを削除
            3.PHP側の処理で、重が不正な箇所で出てしまうバグを修正
            4.リファクタリング

2018/12/14  1.リファクタリング

2018/12/14  1.2018/12/13修正依頼分の修正(多数)。メッセージ部のみ未作成

2018/12/17  1.日付校時ダイアログのメッセージ部修正

2018/12/18  1.コメントの追加修正

2018/12/21  1.リファクタリング
            2.リファクタリング

2018/12/25  1.列入替のチェック機能(出欠以外)
            2.日付校時で移動/コピーのエラーメッセージ出力修正
            3.列入替の出欠チェック機能

2018/12/26  1.列入替機能追加
            2.列入替のチェック処理/出欠チェックの修正

2018/12/27  1.列入替の配列のマージ方法変更
            2.不明用のSQL対応（Ajaxは教員のみ対応）
            3.不明用のPHP出力部修正(作成途中)
            4.不明行のコマ入れ

2018/12/28  1.不明行の教員以外のSQL対応

2019/01/08  1.教員の移動/コピー不具合修正

2019/01/10  1.リファクタリング(初回読み込み時の受講生重複チェック高速化)

2019/01/11  1.リファクタリング(講座ドロップ時の受講生重複チェック高速化)
            2.初回読込時の受講生重複チェックの不具合修正

2019/01/23  1.リファクタリング(SQL文でSELECT時、INDEXが当たるよう修正)
            2.講座毎の受講人数チェック時、受講人数が超えている講座のみを取得するよう修正
            3.校種「useSchool_KindField」が「1」以外の場合、職員の「レイアウト編集（縦）」の初期表示が行われない不具合を修正

2019/02/02  1.UNIT_SCH_CHR_RANK_DATの更新処理を追加。PrimarySchoolProcess::delInsUnitSchChrRankDat

2019/02/02  1.日付Fromの値変更時、Toの値へ1週間後を設定
            2.読込時のテロップへプログレスを追加

2019/02/07  1.時間割種別へ「考査」を追加
            2.連続授業のコマ移動を1コマに変更
            3.反映ボタン押下時のコマ入れで定期考査の場合、連続授業でも1コマのみ追加
            4.日付校時で移動/コピーへ考査としてのコピー機能追加

2019/02/18  1.表示文言変更

2019/03/22  1.講座人数オーバー時の色を変更する機能を追加
            2.科目、または講座を指定し、講座の色を変更する機能を追加
            3.講座に設定されている受講者名簿が完全に同一の場合、色を変更する機能を追加

2019/04/04  1.背景色変更時の色を時間割のレイアウトへ追加
            2.背景色処理中に「処理中」のメッセージを表示

2019/04/08  1.リファクタリング(日付校時で移動/コピーの重複チェック高速化)

2019/04/10  1.色分け表示設定に「指定生徒の受講講座」を追加

2019/04/15  1.重複講座名簿画面を開くボタン追加

2019/04/16  1.受講生重複チェックを基本時間割も行うよう修正
            2.基本時間割の時、「色分け表示設定」を学期末付で受講生の講座を指定するよう修正

2019/04/17  1.基本時間割の受講生重複チェックでコマを移動時に行われていなかった不具合修正

2019/04/18  1.「重複講座名簿」の表示を「重複名簿等の移動」に変更
            2.選択しているコマの講座を「重複名簿等の移動」画面へ表示するよう修正

2019/07/11  1.制限付きユーザーのとき、下記を変更
             -- 左上コンボ変更時の絞り込みをログイン者に関連する項目のみに制限
             -- 一部ボタン、チェックボックスをdisabledに変更
             -- 削除機能は使用不可
            2.「重複名簿等の移動」押下時に選択処理日、選択校時のパラメータを追加
            3.「重複名簿等の移動」の遷移先をKNJB3042_CHAIR_STD → KNJB3042_CHAIR_STD_SELECTに変更

2019/07/31  1.KNJC010Aから遷移できるように対応

2019/08/02  1.時間割を読み込んでいないとき、上部の「終了」ボタン押下で画面が閉じない不具合を修正

2019/08/14  1.基本時間割のテンプレートを削除するボタンを追加

2019/08/19  1.設定講座一覧の講座を選択後に時間割を選択した時、選択した講座がselectedのままになるように変更
            2.設定講座一覧のVALUEが設定されない不具合を修正

2019/09/18  1.収容講座数を超えていたら「施」と表示する

2019/11/14  1.時間割種別が考査のときに、時間割を反映しても考査時間割にならない不具合を修正
            2.時間割種別が考査で、左列に該当がない場合に不明ではなく通常として反映される不具合を修正

2019/12/05  1.「日付校時で移動/コピー」に操作対象を指定するリストTOリストを追加
            2.「日付校時で移動/コピー」 → 「日付校時で移動/コピー/入替/削除」に変更

2020/02/13  1.セルクリック時の駒入れ機能追加
            2.「変更通知機能」追加
            3.「ヘルプ」の「出欠未」と「出欠済」の文字色の不具合を修正

2020/03/03  1.職員の所属名を表示するよう修正
            2.職員の表示を「授業受持ち 1:有り」を初期表示するよう修正
            3.職員名「職員氏名表示用」を表示するよう変更

2020/04/08  1.基本時間割で職員が不明の講座を削除できない不具合修正
            2.通常時間割で群IDが取得できない場合、講座を削除できない不具合修正

2020/04/15  1.通知履歴のデバッグ用年度条件修正

2020/04/16  1.通知履歴の宛先職員を正担任に変更
            2.考査時間割指定時のSQLエラー修正

2020/06/15  1.縦軸年組、縦軸科目、縦軸講座、設定講座一覧年組、レイアウト編集（縦）の校種に校種指定を追加
            2.縦軸職員、設定講座一覧職員、レイアウト編集（縦）職員の条件に利用者マスタの校種指定を追加
            3.設定講座一覧講座の校種に校種指定を追加
            4.時間割表に指定校種以外の時間割を表示しない

2020/06/17  1.「日付校時で移動/コピー/入替/削除」画面で操作対象を指定した場合、
              「列移動/列コピー/列入替え/列削除」の活性/非活性の条件が操作対象で絞り込みが行われていない不具合修正
            2.操作対象を移動時、「列移動/列コピー/列入替え/列削除」の活性/非活性を更新するよう修正

2020/08/07  1.新規割当講座の集計フラグの更新値を修正。'1'固定 → CHAIR_DATの値

2020/11/06  1.HR、科目指定時の削除処理の不具合修正

2020/12/11  1.テスト考査画面の土台作成
            2.通常画面からテスト考査の移動処理禁止処理(KNJB3042_SchTestPattern=1の場合)追加

2020/12/14  1.試験会場追加(useTestFacility = 1の場合表示)
            2.テスト考査画面も試験会場対応

2020/12/15  1.重複している生徒数の合計、その校時に配置されている講座の生徒数合計の表示機能作成
            2.表示校時リスト切り替え追加

2020/12/16  1.重複生徒の含まれている講座をグレーで表示する機能作成
            2.テスト考査画面のセル操作機能作成
            3.日付校時の操作のチェックを再作成

2020/12/23  1.重複している生徒数の合計、その校時に配置されている講座の生徒数合計の表示機能修正
            2.「日付校時で移動/コピー/入替/削除」のボタンを有効化し、その機能を作成
            3.「考査として移動またはコピー」のチェックボックスを隠す
            4.入替操作に関するバグの修正

2020/12/24  1.Queryに含まれていた$thisを$modelに修正

2020/12/25  1.重複生徒の含まれている講座をグレーで表示する機能のバグを修正

2020/12/28  1.重複生徒一覧機能作成
            2.重複生徒一覧に係るSQL修正

2021/01/04  1.試験配置表出力機能追加
              プロパティー：「KNJB3042_SchTestPattern」= 1の画面に表示

2021/01/07  1.終了日付を変更しても変更されないバグの修正
            2.基本時間割は出欠情報に関連しないので出欠の確認メッセージを出さないようにする修正

2021/01/15  1.テスト考査時間割(「KNJB3042_SchTestPattern」= 1の画面)で「notDispWeekend_ChairTest」 = 1の場合土日を表示しないように修正

2021/01/19  1.「notDispHoliday」= 1の時、土日祝日を非表示にする修正追加
            2.テスト考査時間割(「KNJB3042_SchTestPattern」= 1の画面)で講座ダブルクリック後の画面の日付校時ダイアログを表示して日付校時を変更した場合、講座の位置がずれるバグを修正
            3.休日の取得する日付範囲を変更

2021/01/29  1.SCH_CHR_HRATE_DATを更新する際、受講生徒データ（CHAIR_STD_DAT）にいる生徒の年組（SCHREG_REGD_DAT）で更新するよう修正
            2.インデントの崩れを修正
