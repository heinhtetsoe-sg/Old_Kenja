# kanji=漢字
# $Id: readme.txt 68121 2019-06-20 03:20:07Z ishii $

/*** KNJA120 生徒指導要録（所見入力）賢者版 ***/

2006/04/28 o-naka NO001 <textarea>タグのwrap属性を"hard"から"soft"に変更
           o-naka NO002 警告メッセージを表示する場合、入力した内容の表示が消える不具合を修正(活動内容/評価)
2006/07/05 o-naka 通知票所見参照にて、年度コンボを追加
                  通知票所見参照での表示について、全ての学期を表示するように修正した。
                  近大の場合、通知票所見参照ボタンを非表示とするようにした。

2006/11/10 m-yama 指導要録所見データとヘッダデータのCSV処理呼び出しのボタンを追加した。

2006/11/30 m-yama 指導要録所見データへのパラメータ(フィールドサイズ)を変更した。

2009/04/17  1.「出欠備考参照」「調査書(進学用)の出欠の記録参照」ボタン追加

2009/07/13  1.「部活動参照」、「委員会参照」ボタンの追加
            2.データCSVボタンの表示文字の修正

2009/10/23  1.ログイン年度ではなく、左フレームからの年度を使うよう修正

2009/11/06  1.prgInfo.properties の seitoSidoYorokuSougouFieldSize = 1の時は、総合所見(66文字×6行)に修正
            2.csv取込みも 総合所見(66文字×6行)に修正

2009/11/10  1.「成績参照」「資格参照」ボタン追加

2009/11/06  1.prgInfo.properties の seitoSidoYorokuSougouFieldSize = 1の時は、総合所見(66文字×7行)に修正

2009/12/08  1.prgInfo.properties の seitoSidoYorokuFieldSize = 1の時も、総合所見(66文字×7行)に修正

2009/12/10  1.prgInfo.properties の useQualifiedMstで資格参照の表示を切り替える処理追加
            2.条件分子の修正
            2.再度条件分子の修正

2010/01/29  1.prgInfo.properties の seitoSidoYorokuSougouFieldSize = 1の時は、総合所見(66文字×8行)に修正

2010/02/02  1.prgInfo.properties の seitoSidoYorokuSpecialactremarkFieldSize = 1の時は、特別活動所見(22文字×10行)に修正
            2.文字数チェックを行数チェックに変更

2010/02/22  1.「生徒指導要録より読込」ボタン追加
            2.「生徒指導要録より読込」ボタンの読込み先をHREPORTREMARK_DATのTOTALSTUDYTIMEに修正、
              tutisyoSougoushokengakkiが1の時、9学期のみ所見を参照するよう修正
            3.文字修正「生徒指導要録」⇒「通知票」
            4.通知表所見参照に「総合的な学習の時間・学習内容」「特別活動所見」を追加した。
              prgInfo.properties の tutisyoSougoushokengakki = 1の時、9学期のみ所見を表示する。
              prgInfo.properties の tutisyosanshou---Juni- = 1の時、項目名、データを出力しない。

2010/02/23  1.「通知票より読込」ボタンを押したとき、「評価」だけでなく「活動内容」も読込む(TOTALSTUDYACT)よう修正

2010/03/17  1.ModelのgetPropertiesAll()を使うよう修正
            2.「出欠備考参照」ボタンのパラメーターにSDATEとEDATEを追加
            3.「通知表所見参照」の表示をプロパティーファイルで制御できるよう修正
            4.テーブル追加(RECORD_TOTALSTUDYTIME_DAT)に伴う修正

2010/03/18  1.「通知票より読込」ボタンの表示・非表示をプロパティーファイルで設定できるよう修正
            2.「HREPORTREMARK_DAT」の「TOTALSTUDYTIME」も「RECORD_TOTALSTUDYTIME_DAT」を参照するよう修正

2010/03/18  1.「HREPORTREMARK_DAT」と「RECORD_TOTALSTUDYTIME_DAT」の参照フィールドの修正
            --「通知表所見参照」で「tutisyoSougoushokengakki」を参照していたのをカット
            2.「通知表所見参照」で「TOTALSTUDYACT」をカット

2010/04/02  1.「部活動参照」、「資格参照」を取得年度のみ表示するよう修正した。

2010/04/22  1.「availheight」を「availHeight」に修正

2010/05/06  1.「通知書所見参照」のポップアップから年度コンボをカット

2010/09/06  1.成績参照画面に中高一貫校の条件を追加した。

2010/10/08  1.テキストエリアの行の桁数に「文字数*2+1」の値をセットした。

2011/03/04  1.委員会参照画面に学期を追加した。

2011/03/30  1.以下の修正をした
            -- 権限渡し
            -- エクセル出力ボタン表示有無

2011/04/05  1.文字数チェックをバイトチェックに変更した。

2011/04/05  1.MENU_HIGH_SECURITY_MSTのPROGRAMIDがある場合、PROGRAMPATHを参照する。
            2.KNJXEXPへ渡すパラメータ(SEND_AUTH)を追加。
            
2012/02/06  1.総合的な学習の時間データの表示を科目、学期の順で改行しながら表示する

2012/03/21  1.通知表所見参照にHREPORTREMARK_DETAIL_DATのREMARK1を追加
              - prgInfo.properties(reportSpecialSize03_01__REMARK1、reportSpecialSize03_02__REMARK1)にて項目名設定
              - DIV='03'、CODE='01'の時のREMARK1をreportSpecialSize03_01__REMARK1と対応する
              - DIV='03'、CODE='02'の時のREMARK1をreportSpecialSize03_02__REMARK1と対応する

2012/03/29  1.総合所見について、以下の不具合を修正
            -- prgInfo.properties の 
            -- seitoSidoYorokuSougouFieldSize = 0
            -- seitoSidoYorokuFieldSize = 0
            -- の時、画面は(44文字×6行)と表示されます。
            -- しかし、文字チェックは(66文字×6行)でチェックしている。
            -- よって、文字チェックを(44文字×6行)に修正した。

2012/06/01  1.プロパティー「useCurriculumcd」を追加した。
            -- '1'がセットされている場合は教育課程コード等を使うようにした。

2013/01/09  1.CLASS_MSTテーブルのCURRICULUM_CDをカット

2013/03/19  1.東京仕様の場合、奉仕の記録を表示、更新する

2013/03/29  1.行数のパラメータ追加

2013/04/01  1.学校名を名称マスタのNAMECD1=Z010より取得するよう修正

2013/04/24  1.東京仕様の場合、備考を表示、更新する

2013/06/20  1.出欠備考参照ボタンの参照先を切替処理追加
                - Properties["useAttendSemesRemarkDat"]の値により切替を行う
                
2013/06/25  1.出欠備考参照ボタンの表示名を修正
                - Properties["useAttendSemesRemarkDat"] = 1の時、まとめ出欠備考参照
                - それ以外、日々出欠備考参照
                - 生徒を選択していない場合は、エラーメッセージを出力

2013/07/04  1.部活動参照ボタンの位置を変更した。

2013/07/08  1.useTuutisyoSyokenNendo = 1の時、通知表所見の年度コンボを表示する。

2013/08/28  1.部活動の参照内容を修正
                - 入部日、退部日が年度開始日、終了日の場合も条件に含まれるよう修正

2013/08/29  1.部活動および委員会取込ボタンを追加
              - 部活動は、在籍している部活のみ対象
              - 部活動の退部日付がnullの時は、ログイン年度が対象
              - 委員会は、指定年度が対象
            2.取込ボタンの色を変更
            3.取込ボタンでコピーする際、フォーカスの位置からコピーする。

2013/08/30  1.取込ボタンの色を再変更

2013/09/10  1.プロパティuseTorikomiAttendSemesRemarkDat = 1の時（#useAttendSemesRemarkDat = 1の時のみ設定有効）
              - まとめ出欠備考参照 ⇒ まとめ出欠備考取込に変更
              
2013/09/11  1.プロパティuseTorikomiAttendSemesRemarkDat = 1の時のまとめ出欠備考取込の仕様を修正
                - 取込データがない場合は、空白とする
                
2013/10/02  1.東京仕様の場合、奉仕の記録の活動内容の下に総合的な学習の時間で代替チェックボックスを追加
              - チェックを入れたとき、自動で活動内容の入力内容をクリアし、'総合的な学習の時間で代替'と表示
              
2013/10/29  1.調査書より読込ボタンを追加
              - 3年生のみボタンを表示
              
2014/02/13  1.通知票より読込ボタンの位置を変更

2014/04/14  1.ラベル機能追加
            2.（高セキュリティー）子画面の戻るボタンが機能しない不具合を修正

2014/05/23  1.tyousasyoShokenPreviewが'1'の場合、調査書所見プレビューボタンを表示

2015/02/27  1.総合的な学習の時間の記録にSCHREG_REGD_GDATのGRADE_CDにより判断し、下記のボタンを追加および修正
              - 通知票より読込ボタン ⇒ 1,2年次は通知票取込ボタン(プロパティ「tutihyoYoriYomikomiHyoujiFlg」= '1'で表示)に修正
              - 3年次は調査書取込ボタンを追加

2015/05/15  1.添付書類PDF取込機能を追加
              - プロパティ（useUpdownPDF = 1）の場合、使用する。

2015/07/24  1.部活動取込ボタン押下時、最初に対応レコードのみを取得し、その後で項番を付けて表示するよう修正

2016/02/15  1.資格取得では、取得日の年度にかかわらず全て表示するよう修正

2016/03/17  1.記録備考参照ボタン追加
            -- プロパティ「club_kirokubikou」が"1"のとき、表示する。

2016/06/16  1.入力中の文字数/行数チェック処理の共通化

2016/06/24  1.ボタンの文言を「記録備考参照」→「大会記録備考参照」に変更

2016/10/04  1.php5.6対応

2016/10/21  1.委員会取込、部活動取込ボタンのIE11からの仕様(document.selectionが廃止)に対応

2017/01/11  1.委員会取込内容を変更。（役職名を追加。「／」より後がブランクの場合表示しない。）

2017/01/16  1.部活動取込内容を変更。（役職名を追加。「／」より後がブランクの場合表示しない。）

2017/01/17  1.入力文字数チェック用に、FEPの設定をセットする。(1=IME、2=ATOK)

2017/06/06  1.部活動取込、委員会取込処理を変更

2017/06/14  1.前回の修正もれ
            -- IE11未満の対応

2017/07/24  1.「資格参照」に、"主催"を追加

2017/08/01  1.各参照ボタンで、日付の和暦表示切替処理追加
            --プロパティ useWarekiHyoji = 1 の時、和暦で表示する

2017/08/30  1.出欠の記録参照ボタン追加
            --プロパティー「tyousasyoSyukketsuKirokuBtn」が'1'のとき表示

2017/09/26  1.通知表所見参照ボタン非表示、プロパティー「unUseSyokenSansyoButton」が"1"の時
            2.前回の修正、プロパティーを「unUseSyokenSansyoButton_H」に変更

2018/09/14  1.ボタンカット
            -- 委員会参照、委員会取込、部活動参照、部活動取込、大会記録備考参照、資格参照
            2.ボタン追加
            -- 委員会選択、部活動選択、記録備考選択、検定選択、賞選択
            3.更新時は更新ボタンを押下できないよう変更

2019/01/11  1.共通プログラムに変更
            -- 委員会選択、賞選択、部活動選択、記録備考選択、検定選択

2019/02/19  1.高校指導要録所見入力の特別活動所見欄の部活動選択ボタン表示を
              useKnja120_clubselest_Buttonプロパティ(1の時に表示)で制御するよう、変更
            -- プロパティー「useKnja120_clubselest_Button」追加

2019/02/27  1.条件を「3年生のとき」→「卒業可能学年のとき」に変更。

2019/03/14  1.2018年度以降入学生は、総合所見を表示のみ、KNJE015コールボタン表示
            2.総合所見の使用不可条件に ENT_DIVが "1","2","3" の場合を追加
            3.画面遷移時は、保存されないメッセージを出す

2019/03/15  1.総合所見の使用不可条件を以下のように変更
              2018年度 1学年:使用不可、2学年:使用可、3学年:使用可
              2019年度 1学年:使用不可、2学年:使用不可、3学年:使用可
              2020年度 全学年使用不可

2019/03/18  1.データ更新時、画面のロックを追加

2019/03/25  1.2019/03/15の修正間違いを修正。(入学年度 → 指定年度)
            2.useSeitoSidoYorokuShomeiKinou=1の場合、平成30年度入学者仕様の対象外

2019/03/26  1.テキストエリア内で一行で表示される不具合を修正

2019/06/20  1.プロパティ「useSeitoSidoYorokuSougouShoken」を追加
