# kanji=漢字
# $Id: readme.txt 76205 2020-08-26 08:25:55Z arakaki $

2006/10/11 m-yama   CVS登録
                    同年度、同学期のコピー処理を不可にした。

2009/03/26  1.組名称1、組名称2、年名称を追加
            2.レイアウト調整

2009/06/30  1.年名称をカット

2009/09/16  1.チェックボックスにラベルを追加した。

2010/02/16  1.学期データーのコピー時のフィールド「GRADE_NAME、HR_CLASS_NAME1、HR_CLASS_NAME2」の順番修正

2010/04/06  1.「生徒もコピー」チェックボックスをカットした。コンボの値、表示条件修正
            2.コピーチェックのSQLを修正

2010/07/30  1.「生徒もコピー」チェックボックスを追加した。
            2.「生徒もコピー」がチェックのときにCLASS_FORMATION_DATをチェックに変更した。
            3.「生徒もコピー」のとき、OLD_GRADE,OLD_HR_CLASS,OLD_ATTENDNOにもデータをセットする。

2010/08/10  1.担任・副担任の追加ボタン追加、「STAFF_CLASS_HIST_DAT」追加に伴う修正

2010/08/18  1.「生徒もコピー」チェックボックスのdisabledの条件を変更した。

2010/08/30  1.REGISTERCDの更新を変更した。

2010/12/28  1.「卒業生・退学者・転学者も含む」チェックボックスを追加した。
            2.「卒業生・退学者・転学者も含む」→「退学者・転学者・卒業生も含む」に変更した。

2011/03/01  1.以下の通り修正。
            -- 「左の学期のデータをコピー」処理で、
            -- STAFF_CLASS_HIST_DATの開始日付と終了日付を
            -- 固定で設定しているのをカットし、素直にコピーする。

2011/04/04  1.「左の学期のデータをコピー」で、対象年度が次年度の時、
            -- STAFF_CLASS_HIST_DATの開始日付と終了日付を固定にした。

2011/06/23  1.CSV取込み機能追加

2011/06/24  1.CSV取込み機能STAFF_CLASS_HISTテーブルへの更新機能追加

2011/06/30  1.CSV取り込み機能修正
              - 呼び出し元の入力部分の画面位置を修正
              - ヘッダ出力に必須項目※を追加
              - CSVの書き出し時に担任、副担任が登録されている場合のみ担任区分を出力するように修正
              - CSVの書き出し対象のファイルを対象年度部分のみに修正
              
2011/07/01  1.CSV取り込み機能修正
              - 担任、副担任追加時に前任者の終了日付を追加した先生の開始日の前日になるように修正
            2.CSV書き出し機能修正
              - 担任、副担任の開始日と終了日の書き出し部分を修正
              
2011/07/14  1.組コード、職員コードのゼロ埋めを修正。
            2.日付の学期範囲外チェックについて、以下の通り修正。
            -- 修正前：左画面の年度・学期で学期マスタを参照する。
            -- 修正後：ＣＳＶの年度・学期で学期マスタを参照する。

2011/08/24  1.エクセル出力機能追加。

2011/11/28  1.以下の通り修正
            -- 「生徒もコピー」「卒業生・退学者・転学者含む」について
            -- デフォルトチェックを入れておくように変更

2013/05/16  1.ラベル機能を追加した。
            2.日付の置換処理を追加した。

2013/06/28  1.availheight → availHeight
            
2014/01/17  1.STAFFCDフィールドサイズ変更に伴う修正
             - Properties["useStaffcdFieldSize"]=10のときのみ、対応

2014/05/26  1.更新/削除等のログ取得機能を追加

2014/05/27  1.ログ取得機能修正 (画面表示データを取得するよう修正)

2015/11/16  1.対象年度コンボの最終学期の場合の制御をカットし、ログイン年度と次年度の全てを表示する
                - 初期値はログイン学期の次学期を表示し、最終学期の場合は次年度の1学期(または前期)を表示

2016/09/21  1.プロパティー「useSchool_KindField」とSCHOOLKINDを参照 

2016/10/11  1.固定文言「生徒」修正
            -- SETTING_DAT参照、なければ固定で「生徒」

2016/10/12  1.プロパティー「useSchool_KindField」とSCHOOLKINDを参照 (SQLエラー修正)

2016/12/28  1.職員番号マスク機能追加
            -- プロパティー「showMaskStaffCd」追加
            -- showMaskStaffCd = 4 | *
            -- この設定だと、下４桁以外は「*」でマスク
            -- 「showMaskStaffCd」が無いときは通常表示

2017/01/25  1.固定文言「組名称１」に"※"追加
            2.名称マスタ「Z010」で"miyagiken"の時、固定文言「組名称２」に"※"追加

2017/04/13  1.名称マスタ「Z010」で"sundaikoufu"の時、"miyagiken"と同様に固定文言「組名称２」に"※"追加
            2.CSV出力でDBエラーになる不具合修正
            3.CSV取込の日付チェックの際の日付変換を変更

2017/08/07  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2017/08/22  1.削除時、履歴データも削除する。
            --追加時に左画面から選択した場合は、変更した年組で履歴データを作成

2017/08/25  1.2017/08/07の修正で不十分な箇所修正

2018/04/03  1.DBエラー対応

2019/01/18  1.CSV出力の文字化け修正(Edge対応)

2019/09/19  1.参照学期コンボのWarning対応

2020/05/20  1.校種プロパティ指定有りで指定年度の対象校種のSCHREG_REGD_GDATがない場合、エラーメッセージを表示する

2020/08/26  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/11/27  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを設定ファイルの内容で切り替えるように変更

2020/12/23  1.CSV出力、取込から担当区分1～担当区分6を削除

2021/01/15  1.CSVメッセージ統一(SG社)

2021/04/16  1.PHP7対応修正修正
