# kanji=漢字
# $Id: readme.txt 63472 2018-11-19 07:08:13Z yamauchi $

/*** KNJC033K クラス別欠時数入力 readme.txt***/

2006/12/01 m-yama   CVS登録。
                    不要な処理を削除した。
                    オブジェクト作成をメソッドにした。
                    月データの固定出力を可変に変更した。

2006/12/07 m-yama   年-組-番押下時の表示データに出欠名称欄を追加した。
                    年-組-番押下時の表示データに学籍番号を追加した。
                    更新時に入力フィールドがNullの場合'0'をセットするよう修正した。

2006/12/15 m-yama   一括更新画面を追加した。
                    対象月のチェック処理を追加した。

2006/12/18 m-yama   一括更新画面の更新処理を修正した。
                    一括更新画面の授業日数を2桁から3桁に変更した。
                    科目コンボ変更時に生徒データをクリアするよう修正した。
                    締め日と授業日数の更新処理を追加した。
                    (一括更新画面処理はコールしない)

2006/12/19 m-yama   固定文言'学級・講座'を'講座'に修正した。
                    入力データは、エラー時にクリアしない。

2006/12/21 m-yama   更新者、更新日の登録が抜けていたので、追加した。

2006/12/22 m-yama   更新時に入力フィールドがNullの場合'0'をセットせず、
                    Nullで更新するよう修正した。(2006/12/07の修正を戻した)
                    締め日と授業日数の配置を変更した。

2007/02/20 m-yama   ABSENT → SICKに変更
                    授業日数 → 授業時数に変更
                    SICK → NONOTICEに変更

2007/02/26 m-yama   欠課種別コンボを追加した。

2007/05/07  空白データと、０データの扱いの変更
            -- 更新時に入力フィールドがNullの場合'0'をセットするよう修正した。
            -- 表示データが'0'の場合空白を表示するよう修正した。

2007/05/24  CSV処理を追加した。

2008/07/17  1.データにNULLが１つでもあれば、月名を黄色にする。

2008/11/10  INSERTの際、選択した欠課種別以外の項目に0をセットする。

2009/01/26  締め日を手入力ではなく『APPOINTED_DAY_MST』参照に変更

2009/01/28  学期名の追加

2009/03/16  1.入力を3桁までOKにした

2009/09/28  1.5行毎に色を変えるよう修正

2009/10/03  1.貼付け機能の追加

2009/11/06  1.「欠課種別」に「15 遅刻」「16 早退」を追加

2009/11/10  1.表のタイトルを欠課種別コンボの値とあわせるよう修正、「対象月」に属している生徒のみ出力するよう修正

2009/11/27  1.「授業時数」「欠次数」「遅刻数」「欠課数」を追加
            2.引数の修正

2009/12/02  1.学校マスタの各フラグを参照し「休学・出停・忌引」を授業時数から除く処理を追加した。
            2.「授業時数」→「出席すべき授業時数」に変更した。

2009/12/03  1.欠課種別コンボの初期値を'6'（欠課）に変更した。

2010/05/11  1.欠課種別に「3 忌引」を追加した。

2010/05/12  1.欠課種別に「1 公欠」を追加した。

2010/05/14  1.「欠課種別」は名称マスタ「C041」の「予備1」に'1'がたっているフィールドだけ表示するよう修正

2010/05/20  1.「欠課種別」コンボは名称マスタ「C041」「C001」両方に登録されているコードを表示、
            -- ただしコードは'1', '2', '3', '4', '5', '6', '15', '16'のみ
            -- コンボの初期値は予備1が'1'の物とする
            -- 「出欠点票」ボタン追加
            --  タブキーまたはエンターキーで次のテキストボックスへ移動する処理追加

2010/05/24  1.「出欠点票」を「印刷」に修正、「印刷」ボタンを画面上からカット
            2.コピペ機能に追加分のコードを追加
            3.「印刷」ボタンを画面上に表示

2011/02/10  1.累積の遅刻数を欠課数換算なしの値に変更した。
            2.累積の遅刻数をプロパティー「chikokuHyoujiFlg」によって換算なし、または換算後の値を表示するよう修正

2011/02/17  1.帳票パラメータ「chikokuHyoujiFlg」を追加。

2011/03/30  1.レコードなしの色を変更した。
            2.異動者（退学・転学・卒業）を黄色で表示した。

2011/03/31  1.ＣＳＶ入出力をカット。
            2.ＣＳＶ処理ボタンを追加した。

2011/04/01  1.以下の修正をした
            -- 権限渡し
            -- エクセル出力ボタン表示有無

2011/07/21  1.貼り付けを表示されている生徒分できるように修正した。

2011/09/07  1.2008/11/10  INSERTの際、選択した欠課種別以外の項目に0をセットする。の不具合修正
            選択した欠課種別も0にしていたので、選択した欠課種別は0で更新しないよう修正した。

2011/11/08  1.異動表示対象に留学、休学を追加した。

2012/01/12  1.異動表示対象に除籍を追加した。

2012/01/18  1.教育課程の追加、追加に伴う修正
            -- Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応
            2.修正
            3.修正

2012/02/28  1.指定月のATTEND_SEMES_DATにデータが無ければ追加するように修正した。

2013/06/24  1.授業時数のデフォルト表示(法定で、学期の最終月指定時)
            -- 一行目の生徒の単位数×学校マスタの週数

2013/08/13  1.DI_CD'19','20'ウイルス追加に伴う修正
            -- rep-attend_semes_dat.sql(rev1.8)
            -- rep-attend_subclass_dat.sql(rev1.10)
            -- v_attend_semes_dat.sql(rev1.6)
            -- v_attend_subclass_dat.sql(rev1.3)

2013/08/14  1.DI_CD'25','26'交止追加に伴う修正
            -- rep-attend_semes_dat.sql(rev1.9)
            -- rep-attend_subclass_dat.sql(rev1.11)
            -- v_attend_semes_dat.sql(rev1.7)
            -- v_attend_subclass_dat.sql(rev1.4)
            -- v_school_mst.sql(rev1.20)

2013/08/22  1.C041のソート変更NAMESPARE2,NAMECD2

2013/08/26  1.テキスト内でのEnterとTabを同一として扱う。
            2.終了押下時に、確認メッセージ「保存されていないデータは破棄されます。処理を続行しますか？」を表示する。
            -- src/common/common.js(function closeMsg()追加)

2013/08/27  1.プロパティーhibiNyuuryokuNasi='1'の時、年組番のリンクを出さない。

2013/08/28  1.データ変更後、更新せずに終了ボタンを押下したら、メッセージを表示する。

2013/10/31  1.DI_CD'19','20'ウイルス追加、'25','26'交止追加に伴う修正漏れ対応
            2.授業時数のデフォルト表示(法定で、学期の最終月指定時)の一行目の生徒の単位数×学校マスタの週数の仕様追加
              - V_SCHOOL_MSTのSEQ='001'のREMARK1='1'でかつプロパティhibiNyuuryokuNasi='1'のとき

2014/02/04  1.2013/10/31の2の追加仕様に、学期内で合算したLESSONのMAX値を除く仕様を追加

2014/03/10  1.更新時のロック機能(レイヤ)を追加

2014/04/21  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効
            2.貼り付け機能の修正
                - 関数名を修正 show ⇒ showPaste

2015/04/17  1.保存→更新

2015/08/11  1.プロパティ「use_Attend_zero_hyoji」= '1'のときの処理を追加
            -- 表示：データの通りにゼロ、NULLを表示
            -- 更新：表示の通りにゼロ、NULLで更新
            2.データ未入力の背景色の判定を変更
            -- ATTEND_SUBCLASS_DATのSCHREGNOの有無

2015/08/25  1.パラメータuse_Attend_zero_hyojiを追加

2015/11/16  1.科目、講座、対象月、欠課種別コンボ変更時、MSG108を表示する。

2015/11/19  1.累積警告、累積注意の表示追加

2016/01/27  1.学年学期対応
            -- 締め日と学期マスタのチェック処理カット(手入力がなくなったのでOK)
            -- 締め日が月の最終日以下チェックカット(KNJZ177でチェックする)

2016/02/03  1.修正

2016/03/30  1.サブミット時に別データでの上書が発生する事案に伴い
            -- model変数をPHPでセットせず、postする処理に変更

2016/09/29  1.プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2016/10/14  1.欠課フィールドのIEによるクリアボタン表示をカット

2016/10/17  1.締め日の学年をGRADEからGRADE_CDに変更

2017/02/15  1.エンターキーによる次の生徒への移動処理修正

2017/03/06  1.Z005の参照をログイン校種により切替える。

2017/03/07  1.ADMIN_CONTROL_DATキー追加
            -- rep-admin_control_dat.sql(rev1.1)

2017/05/23  1.固定文言変更「授業日数」⇒「授業時数」

2017/06/15  1.更新中は使用不可
            -- 全コンボ、全ボタン、授業時数テキストボックス

2017/08/01  1.欠課種別が名称マスタに登録されていないとエラーになる不具合修正

2017/09/22  1.CSV出力画面に各項目データを渡す修正

2017/09/29  1.生徒取得SQLの不具合修正

2017/10/03  1.ATTEND_DI_CD_DAT移行
            -- attend_di_cd_dat.sql(1.2)

2017/12/05  1.プロパティuse_school_detail_gcm_datが1の場合設定する授業時数をKNJC035Fと同様に算出するよう修正

2018/11/19  1.科目コンボ変更
            -- 合併先科目は対象外

2021/03/10  1.京都PHPバージョンアップ対応