# kanji=漢字
# $Id$

2014/08/26  1.新規作成

2014/10/21  1.連続校時対応

2014/10/24  1.KNJC030A対応

2014/10/30  1.更新が遅いので修正

2014/11/13  1.時間割の出欠済み区分が更新されるように修正
            2.全員出席時(030A)のEXECUTEDの更新修正
            3.030AのEXECUTEDIVの更新修正
            4.030AのSCH_CHR_HRATE_DATの作成修正
            5.時間割のない出欠データを削除
            6.KNJC020Aの不要な出欠データ削除不具合修正

2014/11/14  1.DELETE文修正

2014/11/21  1.速度改善（ATTEND_SUBCLASS_DAT取得SQL修正）

2015/01/06  1.担任は、全校時入力可
            2.KNJC030Aのみ全校時可(1の修正に条件追加)

2015/01/08  1.選択時の色を変更

2015/01/09  1.入力項目に「備考入力へ」を追加
            2.備考入力の子画面から戻ったとき、画面をサブミットするよう修正

2015/01/13  1.時間割の有無で色と入力可/不可を制限

2015/01/19  1.備考入力機能追加

2015/01/26  1.選択したセルの色を変える。
            2.更新時の不具合を修正

2015/06/22  1.実施区分に表示順(名称マスタ「C009」名称予備２)を追加

2015/09/09  1.時間割のないコマ(灰色のコマ)は、一日××選択時に処理しない。

2015/09/15  1.コマのサイズを小さくした。

2016/03/29  1.修正

2016/03/30  1.サブミット時に別データでの上書が発生する事案に伴い
            -- model変数をPHPでセットせず、postする処理に変更

2016/09/08  1.備考入力の子画面が正常に表示されない不具合修正(173/demo)

2017/04/21  1.転退学等入力不可

2017/04/25  1.タイトル欄の「対象講座」の表示はKNJC020Aからコールされた場合のみ表示
            2.出欠勤怠コードのソートを変更(NAMECD2 → NAMESPARE2, NAMECD2)
            3.対象講座の後ろに担当職員、単位数を表示する。
            4.タイトル欄に最終更新者を表示する。

2017/05/19  1.レイアウト修正

2017/05/22  1.レイアウト修正

2017/08/03  1.出欠の端数処理追加

2017/09/25  1.TRIMは、古いDB2では扱えないのでRTRIMに置き換えた
            2.DI_CD(29-32)追加

2017/09/26  1.出欠リスト仕様変更。NAME_MST → V_NAME_MSTに変更

2017/10/04  1.ATTEND_DI_CD_DAT移行
            -- attend_di_cd_dat.sql(1.2)

2017/11/10  1.年組番 氏名欄フォントサイズ変更。1 → 2
            2.実施区分3以上は指定した区分で更新するように修正
            3.実施区分の「C009」名称予備1が1の場合、「指定実施区分の時間割は科目の出欠にカウントしない」とみなしカウントフラグを0で更新する
            4.実施区分の「C009」名称予備1が1以外の場合、カウントフラグを1で更新する
            5.フォントサイズが大きくなったので、高さの指定を変えた。

2018/05/09  1.プロパティ「defaultOrderBy」の値によりソーティングの種類を変更

2018/06/19  1.ACCESS_LOG_DETAIL処理をカット

2018/12/04  1.累積注意の色に変わらない不具合修正

2019/02/05  1.出欠取得のSQL修正

2019/05/11  1.出欠届の仮出欠を読み込み更新ボタンで本出欠として更新する

2019/05/12  1.仮出欠が出欠済み時間割に読み込まれる不具合を修正

2019/05/13  1.処理時間改善

2019/05/20  1.KNJC030Aからコールされた場合、更新時は画面のすべての時間割を出欠済みとする

2019/06/17  1.KNJC030Aから制限付きでコールされた場合にすべての時間割を更新対象に含める職員に副担任を含める

2019/07/01  1.KNJXMENUからコールされた場合の処理を追加

2019/07/12  1.チップヘルプの表示位置を修正

2019/07/16  1.出欠備考入力済みの色が変わらない不具合を修正 (2019/05/13 1.の修正ミス対応)

2019/07/31  1.「時間割作成を開く」ボタンを追加

2019/08/06  1.授業内容登録を追加

2019/09/21  1.プロパティknjc010NotUseScheduleが1の場合、時間割作成を開くボタンを表示しない

2019/10/09  1.プロパティknjc030aInputSelectOnlyが1の場合、KNJC030Aで更新する時間割を選択した校時のみに変更

2020/04/02  1.プロパティー「useAttendSemesHrRemark = 1」の時、クラス出欠備考使用可
            -- attend_semes_remark_ghr_dat.sql(rev.70217)
            -- attend_semes_remark_hr_dat.sql(rev.70217)

2020/06/22  1.メニューから単独で使用できるよう修正
            2.同じ講座が連続して存在する場合、最終校時のみ「出席済」で登録される不具合修正

2020/07/14  1.画面を開いた後、データが更新されていた場合、エラーメッセージを表示するよう修正
            2.別講座の場合、背景色(#ccffcc)を設定しないよう修正
            3.講座選択画面の講座絞込み時、制限ユーザーの絞込みの不具合を修正

2020/09/07  1.仮出欠データのIE以外での読込不具合を修正

2020/09/08  1.プロパティーknjc010aShowAttendInfoが1でKNJC030Aからコールされた場合、選択した生徒、校時の情報をヘッダに表示する

2020/09/09  1.SCH_CHR_COUNTFLG.COUNTFLG更新の際、SCH_CHR_DAT.EXECUTEDIVの名称マスタ「C009」の名称予備1が1でなくても値が0の場合、0で更新する

2020/09/24  1.対象講座を「校時：講座名」のコンボボックスへ変更

2020/10/16  1.授業内容登録ボタン表示/非表示をプロパティーで制御
            -- KNJC010A_UseJugyouNaiyou = 1：表示

2020/11/11  1.講座選択ダイアログの出欠の未/済の色付けの修正
            2.講座選択ダイアログの行をダブルクリックで選択できるように修正
            3.保存、取消ボタンで読み込み中を表示してボタンを押せなくする修正
            4.「講座選択」のボタンを「講座選択ダイヤログを開く」に文言修正
            5.講座選択後、行選択時にアクティブな行のほかのセルを押すと以前アクティブであったセルが白くなるバグの修正
            6.講座選択後、校時ヘッダーをクリックした際に情報を表示する修正

2020/11/12  1.管理者以外で権限が制限付きのとき、RESTRICT_FLG が'1'の出欠コードのみ表示する修正

2020/11/13  1.講座選択後、校時ヘッダーをクリックした際に情報を表示する時のSQLを修正

2020/12/01  1.管理者以外で出欠管理日付以前のデータが保存できないように修正

2020/12/18  1.プロパティ「useKNJC010AGrddiv」が1で、GRD_DIVが「4：卒業見込」以外の時入力不可になるように修正

2021/01/29  1.SCH_CHR_HRATE_DATを更新するとき不要な年組を削除するよう修正

2021/03/01  1.DI_CD = '0'の時、ATTEND_DATが作成されない不具合を修正

2021/04/08  1.KNJC020Aから来た場合はポップアップのリストを作る際にATTEND_DI_CD_DATのRemark2に1が立っているものを出さないように修正

2021/04/12  1.KNJC020Aからコールされた際、講座選択の権限はSEND_AUTHを使用するよう修正
            2.1.の不具合を修正

2021/04/15  1.プロパティーknjc010aNotUseRenzokuが1の場合、校時が連続している授業を出欠済みにしない(関西学院対応)

2021/04/16  1.KNJC030Aからコールされた場合、SCH_CHR_HRATE_DAT.EXECUTED='0'でもSCH_CHR_DAT.EXECUTED='1'なら出欠済みとして出欠届表示の対象外とする
            2.時間割のない校時には出欠届を読み込まない
