# kanji=漢字
# $Id: readme.txt 62821 2018-10-15 02:59:25Z nakamoto $

2012/02/29  1.新規作成(レイアウト：KNJH339A参考、処理：KNJH339A参考)

2012/04/07  1.傾斜の追加に伴う修正
            -- useProficiencyWeighting プロパティーファイル追加

2012/04/12  1.PROFICIENCY_RANK_DATのRANK_DIVに下記を追加
            -- 04:学科
            -- 05:コースグループ
            2.修正
            3.傾斜は四捨五入
            4.修正

2012/04/13  1.DIとREMARK1は同等に扱う(読替先の欠試はREMARK1に*
            2.PROFICIENCY_DATの順位等の更新処理削除

2012/04/14  1.修正
            2.2012/04/13  1.の修正を元に戻した。
            3.修正
            4.修正

2012/04/15  1.PROFICIENCY_AVERAGE_DATのAVG_DIVに下記を追加
            -- 04:学科
            -- 05:コースグループ

2012/04/18  1.RANK_DATA_DIV='02'の偏差値、順位の修正
            2.修正
            3.修正

2012/05/30  1.テーブル名変更
              - COURSE_GROUP_DAT → COURSE_GROUP_CD_DAT
              
2012/06/27  1.教育課程の追加、追加に伴う修正
                - Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応
              
2012/07/09  1.SCORE IS NULL AND SCORE_DI='*' の条件を → SCORE_DI='*' に変更

2012/07/17  1.PROFICIENCY_DATの参照条件を変更
            -- 変更前：「SCORE IS NOT NULL OR SCORE_DI = '*'」と「SCORE IS NOT NULL」
            -- 変更後：「SCORE IS NOT NULL AND SCORE_DI IS NULL」

2012/07/18  1.処理速度を早くする為、余分な処理をカットした
            2.処理速度を早くする為、SQLのWHERE句の順番を変えた

2012/07/19  1.rev1.18に戻した
            2.見込み点のデータは、SCORE IS NULL AND SCORE_DI='*' と同等に扱う

2012/12/20  1.平均点のSQLを修正
            -- PROFICIENCY_RANK_DATの区分傾斜総合点・傾斜平均点のAVGを算出する得点に傾斜をかけない
            -- PROFICIENCY_AVERAGE_DATのAVGを算出する満点に傾斜をかける

2013/04/18  1.平均点の求め方を変更
            -- 現状…各科目を100点換算（少数丸め）し、平均点を算出。
            -- 変更…合計満点で割って、100をかける。（合計900の場合は9で割る）

2013/08/13  1.PROFICIENCY_AVERAGE_DATのAVG_DIVが(05:コースグループ)の時、GROUP_CDがNULLの時'000'とする。

2013/09/30  1.処理実行中にメッセージを出力
            2.コンボ未選択時のエラーチェックを追加

2014/05/12  1.学科の平均点のCOURSECDは課程コードをセットする
            2.SQL修正

2014/06/10  1.順位の基準が偏差値の場合の平均偏差値の算出方法について、変更
            -- 満点が１００以外（整数倍）の場合、基準となる得点は、
            -- 満点の５０％とし科目の偏差値を算出する
            -- ・Ａ科目（満点１００点）の偏差値+　Ｂ科目（満点２００点）の偏差値+・・・・
            -- 　　＝Ａ+Ｂ・・・／（Σ満点÷１００）・・・・・平均偏差値
            -- ・偏差値＝（得点ー平均点）÷標準偏差×１０　+５０・・・・満点が１００点の科目の場合
            -- ・偏差値＝（得点ー平均点）÷標準偏差×１０　+１００・・・満点が２００点の科目の場合
            -- ※変更データ
            -- PROFICIENCY_RANK_DATのRANK_DATA_DIV = '03'の偏差値（DEVIATION）

2014/06/11  1.合算科目(ALL3,5,9)の平均が間違っている不具合を修正
            -- プロパティ(deviationAvgRank = 1)の場合の現象
            -- PROFICIENCY_RANK_DATの(RANK_DATA_DIV = '03')の(AVG)

2014/11/04  1.ログ取得機能追加

2016/09/13  1.順位の基準が偏差値の場合の平均偏差値の算出方法について、変更
            -- 満点が１００以外（整数倍）の場合も、基準となる得点は５０とし科目の偏差値を算出する
            -- ※変更データ
            -- PROFICIENCY_RANK_DATのRANK_DATA_DIV = '03'の偏差値（DEVIATION）
            2.順位の基準が偏差値の場合の平均偏差値の算出方法について、変更
            -- 合算科目の算出式
            -- ・Ａ科目（満点１００点）の偏差値+　Ｂ科目（満点２００点）の偏差値+・・・・
            -- 　　＝Ａ+Ｂ・・・／（科目数ｘ１００）・・・・・平均偏差値

2016/09/21  1.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2016/09/27  1.プロパティが読み込まれないことがある不具合への対応

2017/05/10  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2017/09/05  1.傾斜平均点の算出を変更（ただし明治は変更なし）
            -- 修正前　傾斜得点の平均
            -- 修正後　傾斜得点合計 / 傾斜満点合計 * 100

2017/09/07  1.処理時間改善
            -- 駿台でタイムアウト時に処理完了のメッセージが表示されない現象の対応

2017/09/13  1.プロパティーnotGroupCntカット

2017/09/19  1.2017/09/13の修正を（プロパティーnotGroupCntカット）をもどした
            2.権限チェックのメッセージに「更新可のみ処理が可能です。」追加
            3.学年取得の制限処理をカット

2017/09/29  1.2017/09/19 1.の不具合修正

2018/09/18  1.DB2バージョン8の実行時DBエラー修正

2018/10/15  1.下段に実行履歴表示追加
            -- proficiency_exec_dat.sql (rev.62820)

2021/04/23  1.insertProficiencyRankDat1のDECIMALが入ってくるsqlの部分を修正。