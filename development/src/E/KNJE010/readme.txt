# kanji=漢字
# $Id: readme.txt 74890 2020-06-16 05:06:42Z arakaki $

2006/11/09 m-yama   TAG_TOKIO_E_KNJE010-VER001からコピーした

2008/03/25  1.テーブル変更に伴う修正

2009/04/17  1.「出欠の記録修正」ボタンをカット
              「特別活動～諸事項」ボタンよりポップアップされる画面に
              「出欠備考参照」、「要録の出欠の記録備考参照」ボタン追加

2009/04/20  1.ポップアップウィンドウを出す際、コンボの年度を渡すよう修正
            2.ポップアップ開いたときにテキストエリアに文字が出ない場合があったのを修正

2009/04/21  1.ポップアップウィンドウの高さを広げる修正
            2.レイアウトの調整

2009/04/22  1.以下の修正をした
            --リファクタ
            --参照テーブルの変更
                V_GRD_REGD_YEAR_UNIT_DAT ⇒ GRAD_STUDYREC_DAT
                V_REGDYEAR_UNIT_DAT      ⇒ SCHREG_STUDYREC_DAT
            --ポップアップウィンドウを開いたときの年度と年次の初期値の修正
            2.コメントの修正

2009/07/07  1.７．指導上参考となる諸事項の３分割処理追加

2009/09/17  1.「特別活動の記録 ＆ 指導上参考になる諸事項」登録画面の修正。
            　・「年度・学年（年次）」コンボボックスを生成する際の処理部分の変更。
                -- 学年制もビューを使用するのをやめる。
                -- V_GRD_REGDYEAR_GRADE_DAT ⇒ GRAD_STUDYREC_DAT
                -- V_REGDYEAR_GRADE_DAT     ⇒ SCHREG_STUDYREC_DAT
            　・調査書所見データを表示する際の処理部分の変更。
                -- 学年制も単位制と同じ条件で表示する。
                -- ①指定された生徒の学籍番号
                -- ②「年度・学年（年次）」コンボボックスで指定された年度
            　・調査書所見データを更新する際の処理部分の変更。
                -- 学年制も単位制と同じ条件で処理する。
                -- 更新処理は、該当するレコードを一旦削除して、再度レコードを登録する形になっている。
                -- この一旦削除する際、学年制も単位制と同じ条件で削除する。
                -- ①指定された生徒の学籍番号
                -- ②「年度・学年（年次）」コンボボックスで指定された年度

2009/09/25  1.７．指導上参考となる諸事項の３分割処理(propertiesを参照せず、固定でなしとする)
            2.TRAIN_REF1フィールド、追加に伴う修正
            -- rep-hexam_entremark_dat.sql-1.4
            -- rep-grd_hexam_entremark_dat.sql-1.2
            3.更新でTRAIN_REF2、TRAIN_REF3が消えてしまうバグを修正

2009/10/23  1.鳥取の時の入力可能な桁数を変更

2009/10/26  1.出欠の備考を５行→６行に変更した。

2009/10/28  1.「特別活動の記録」の入力可能なサイズを「prgInfo.properties」のフラグで変えるよう修正

2009/10/30  1.「指導上参考となる諸事項」は「prgInfo.properties」の
              「tyousasyoTokuBetuFieldSize」が「1」の時 5行 ⇒ 7行
            2.「総合的な学習・評価」の行数を修正 4行 ⇒ 5行

2009/11/02  1.「活動内容」テキストエリアの高さを(KNJE010A、KNJE011、KNJE011A と同じに)修正

2009/11/05  1.「指導上参考となる諸事項」は「prgInfo.properties」の
              「tyousasyoTokuBetuFieldSize」が「1」の時 41文字 ⇒ 58文字

2009/11/10  1.部活動参照ボタン、委員会参照ボタンを追加した。

2009/11/11  1.資格参照ボタンを追加

2009/12/10  1.prgInfo.properties の useQualifiedMstで資格参照の表示を切り替える処理追加

2010/02/23  1.「通知票より読込」ボタン追加
            2.エラーの文字数チェックを行数チェックに変更
            3.prgInfo.properties の tutisyoSougoushokengakki を参照するよう修正

2010/02/23  1.「総合学習評価」のサイズは prgInfo.properties の tyousasyoSougouHyoukaFieldSize を参照するよう修正

2010/03/17  1.「出欠備考参照」ボタンのパラメータに開始日付、終了日付を追加した。

2010/03/19  1.参照先テーブルを「HREPORTREMARK_DAT」から「RECORD_TOTALSTUDYTIME_DAT」に変更

2010/03/23  1.getPropertiesAll()を使うよう修正、
            --「部活動参照」、「委員会参照」、「資格参照」ボタンは「学年」コンボ内の年度を表示するよう修正
            --「出欠の記録備考」の文字数、行数はプロパティーファイルで指定できるよう修正

2010/03/31  1.年度がない場合、「出欠備考参照」、「要録の出欠の記録備考参照」、「部活動参照」、
            　「委員会参照」、「資格参照」ボタンを使用不可にした。
            2.部活動参照、委員会参照画面の出席番号をカットして、学籍番号を表示した。
            3.年度取得に卒業生の条件が含まれていない不具合を修正した。
            4.学年（年次）コンボ取得ＳＱＬにソートを追加した。

2010/04/12  1.「総合的な学習の時間」を通年と年単位を分ける処理追加、指導要録参照先をプロパティーファイルで設定できるよう修正

2010/04/22  1.「出欠の記録＆・・・」ボタンで開いた画面で、値が表示されない可能性がある不具合修正

2010/04/22  1.「availheight」を「availHeight」に修正

2010/04/30  1.「出欠の記録＆…」のポップアップウィンドウの縦を長くした。

2010/05/27  1.表示文字修正「学習指導要録より読込」⇒「生徒指導要録より読込」

2010/06/14  1.「出欠の記録～」の学年（年次）コンボボックスのクエリに「SCHREG_REGD_DAT」を追加

2010/06/16  1.「通知票より読込」ボタンを隠した。

2010/07/07  1.「部活動参照」の条件を04/01"以上"、03/31"以下"に修正

2010/07/17  1.CSVの権限チェックに対応

2010/07/22  1.「特別活動の記録」のサイズをプロパティーで変更できるように修正

2010/07/27  1.「出欠の記録備考」「活動内容」「評価」のサイズの初期値修正

2010/07/28  1.CSV処理の「卒業生」に対応

2010/07/30  1.エラーメッセージの修正(「出欠の記録備考」⇒「特別活動の記録」)

2010/08/16  1.「調査書旧データ」を追加
            2.プロパティーの固定値修正

2010/08/19  1.SQLの不具合修正

2010/08/25  1.「指導上参考となる諸事項」3分割の際の初期値の修正
            2.「指導上参考となる諸事項」3分割の際の行の初期値の修正

2010/09/02  1.成績参照画面に中高一貫校の条件を追加した。

2011/03/02  1.委員会参照画面に学期を追加した。

2011/03/29  1.指導要録参照画面（年度）の活動内容、評価のサイズをプロパティーによって変えるように修正した。

2011/04/12  1.文字数チェックをバイトチェックに変更した。

2011/04/28  1.以下の修正をした
            -- 権限渡し
            -- エクセル出力ボタン表示有無
            -- MENU_HIGH_SECURITY_MSTのPROGRAMIDがある場合、PROGRAMPATHを参照する。
            -- KNJXEXPへ渡すパラメータ(SEND_AUTH)を追加。
            
2011/07/20  1.loadwindowの呼び出し位置を修正

2011/08/22  1.指導要録参照画面（年度）の学年コンボのSQLを変更した。
            2.指導要録参照画面（年度）の活動内容、評価の文字数の初期値を変更した。
            3.指導要録参照画面（通年）の文字数を変更した。

2011/08/23  1.指導要録参照画面（年度）の活動内容、評価の文字数の初期値を変更前に戻した。

2011/11/16  1.教育課程の追加、追加に伴う修正
                - Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応

2013/01/11  1.CLASS_MSTテーブルのCURRICULUM_CDをカット

2013/06/20  1.出欠備考参照ボタンの参照先を切替処理追加
                - Properties["useAttendSemesRemarkDat"]の値により切替を行う

2013/07/04  1.部活動参照ボタンの位置を変更した。

2013/07/31  1.指導要録より読込ボタン追加

2013/08/14  1.指導上参考となる諸事項の3分割の各項目はProperties["train_ref_1_2_3_field_size"] = 2の時、21文字/21文字/7文字までとなるように修正

2013/09/09  1.プロパティ「tyousasyoSougouHyoukaNentani」が設定されている場合、帯内にボタンを移動する

2013/09/10  1.プロパティuseTorikomiAttendSemesRemarkDat = 1の時（#useAttendSemesRemarkDat = 1の時のみ設定有効）
              - まとめ出欠備考参照 ⇒ まとめ出欠備考取込に変更
              
2013/09/11  1.プロパティuseTorikomiAttendSemesRemarkDat = 1の時のまとめ出欠備考取込の仕様を修正
                - 取込データがない場合は、空白とする
                - 取込対象年度を学年コンボの年度を見るよう修正
            2.備考に「特記事項なし」チェックボックスを追加

2014/01/07  1. 調査書：「8.総合的な学習の時間」が通年の時は、帯内にボタンを表示する（2013/09/09を修正）

2014/02/28  1.tyousasyoShokenPreviewが'1'の場合、調査書所見プレビューボタンを表示

2014/03/05  1.更新時のロック機能(レイヤ)を追加

2014/03/11  1.更新時のロック機能(レイヤ)修正漏れ対応

2014/03/22  1.調査書所見プレビューボタンにスペース追加

2014/03/28  1.更新時のロック機能(レイヤ)修正

2014/04/25  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効

2014/05/13  1.Properties["train_ref_1_2_3_field_size"]を'-'区切りで設定できるよう修正（指導上参考となる諸事項の3分割の各項目）

2014/05/23  1.調査書所見プレビューボタンをdisabledにしない

2014/05/30  1.更新/削除等のログ取得機能を追加

2015/03/05  1.総合的な学習の時間の項目に学年(SCHREG_REGD_GDATのGRADE_CDにて判断)により下記のボタンを追加および修正
               - 1,2年次は指導要録取込ボタンを表示するよう修正
               - 3年次は通知票取込ボタンを追加

2015/07/23  1.通知票取込のボタン表示の3年次をGRADE_CD='3'で判断していたが、3年次以上で判断するよう修正

2015/12/17  1.更新時は更新ボタンを押下できないよう修正した

2016/03/17  1.記録備考参照ボタン追加
            -- プロパティ「club_kirokubikou」が"1"のとき、表示する。

2016/05/10  1.学習成績概評○囲み表示チェックボックス
            -- プロパティ「useMaruA_avg」の設定があれば非表示。

2016/06/17  1.ボタンの文言を「記録備考参照」→「大会記録備考参照」に変更

2016/07/20  1.学年（年次）コンボに校種"H"の絞込み追加

2016/08/02  1.５．出欠の記録、６．特別活動の記録、７．指導上参考となる諸事項の画面にプロパティが読み込まれるように修正

2016/09/27  1.９．備考の文字、桁数のプロパティーtyousasyoRemarkFieldSize追加

2017/05/30  1.出欠の記録参照ボタン追加
            -- プロパティー「tyousasyoSyukketsuKirokuBtn」が'1'のとき表示

2017/06/07  1.出欠の記録参照画面を修正
            -- 遅刻・早退取込ボタンを取込ボタンに変更
            -- 欠席、遅刻、早退にチェックボックス追加（取込対象項目選択）

2017/06/14  1.前回の修正もれ
            -- IE11未満の対応

2017/07/20  1.学校マスタ情報取得するとき、SCHOOLCD、SCHOOLKINDを渡すよう修正
            -- AttendAccumulate.php(1.7)に伴う修正

2017/07/25  1.「資格参照」に、"主催"を追加

2017/08/01  1.各参照ボタンで、日付の和暦表示切替処理追加
            --プロパティ useWarekiHyoji = 1 の時、和暦で表示する

2017/08/29  1.出欠の記録参照(subForm8.php)で、項目 "停止・忌引" を "停止" と "忌引" に分割し
            --それぞれにチェックボックス追加
            2.文言修正 "停止" → "出席停止"

2017/09/22  1.文言修正 "学習成績概評○囲み表示" → "学習成績概評のマルＡ表示対象者"

2017/11/07  1.プロパティ「useSyojikou3」を固定でブランクにする処理をカット

2017/12/15  1.調査書旧データをカット

2018/02/06  1.出欠の記録備考に特記事項なしチェックボックス追加

2018/04/13  1.資格参照ボタンを検定選択ボタンに変更
            -- 選択学年のデータのみ一覧に表示する
            -- プロパティー「useQualifiedMst」かつプロパティー「useSchregQualified」が'SUBCLASS_QUALIFIED_TEST_DAT'の時
            -- SUBCLASS_QUALIFIED_TEST_DATのデータも表示
            2.テキストエリアの文字数・行数表記を「(全角oo文字Xoo行まで)」に統一した

2018/04/27  1.総合的な学習の時間（内容・評価）に斜線を入れるチェックボックス追加
            -- プロパティー「useTotalstudySlashFlg」が'1'のとき表示

2018/04/30  1.出欠備考に斜線を入れるチェックボックス追加
            -- プロパティー「useAttendrecRemarkSlashFlg」が'1'のとき表示

2018/06/18  1.プロパティーuseMaruA_avgが設定された場合「学習成績概評のマルＡ評定平均値 X.X」を表示
            2.学習成績概評のチェックボックス、文言を備考の下に移動

2018/09/07  1.ボタンカット
            -- 委員会参照、部活動参照、大会記録備考参照
            2.ボタン追加
            -- 委員会選択、賞選択、部活動選択、記録備考選択
            3.出欠の記録＆特別活動～画面で更新時は更新ボタンを押下できないよう変更

2019/01/09  1.共通プログラムに変更
            -- 委員会選択、賞選択、部活動選択、記録備考選択、検定選択

2019/02/13  1.左画面へのパラメーター追加(校種縛り)

2019/07/04  1.「年間出欠備考選択」ボタンを追加
            -- プロパティー「useReasonCollectionBtn」が'1'のとき表示

2019/07/19  1.DB接続・切断を修正

2019/07/25  1.年度追加処理を追加
            -- 入学区分が'4':転入の生徒のとき表示
            2.「備考2」を追加
            -- プロパティー「useHexamRemark2Flg」が'1'のとき表示
            3.「一括更新」ボタンを追加
            4.「一括更新」を「備考一括更新」に変更


2019/07/29  1.「備考一括更新」は「KNJX_HEXAM_REMARK」を呼び出すよう修正

2019/07/31  1.「備考一括更新」は新しいウインドウで表示するよう修正
            2.「備考一括更新」から返却された生徒を表示するよう修正

2019/08/02  1.パラメータ受け取り「GRADE」の処理を修正
            2.KNJXEXPの引き渡しパラメータ修正

2019/09/19  1.「出欠の記録参照」は「KNJX_SYUKKETSUKIROKU」を呼び出すよう修正

2019/10/29  1.定型文入力機能を追加

2019/11/05  1.年度追加処理の対象生徒を修正
            -- 入学区分が'4','5','7'いずれかの生徒を対象
            2.年度追加時のチェック処理を修正

2020/02/05  1.ボタン名称変更
            --【プレビュー／印刷】→【確認用所見印刷】

2020/02/07  1.ボタン名称変更
            --【確認用所見印刷】→【所見確認用】

2020/02/18  1.定型文入力画面を「KNJX_TEIKEIBUN」へ統一

2020/05/28  1.「生徒指導要録より読込」押下時に確認ダイアログを追加
             -- 「OK」押下時は上書き読込、「キャンセル」押下時は追加読込

2020/05/29  1.「生徒指導要録より読込」でキャンセル押下時に、データが取得できなかった場合に元の入力が削除される不具合を修正

2020/06/16  1.KNJE070で使用しているプロパティを追加