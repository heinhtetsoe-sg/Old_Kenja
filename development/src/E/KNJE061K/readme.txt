/*** KNJE061 科目読替処理（対外帳票用） readme.txt***/

2004/07/16 組コード3ケタ対応
2004/08/19 組コード、文字対応もれ<近大-作業依頼書20040819-02.doc>
2004/09/24 区別のためフォルダー名変更
2005/04/21 ATTEND_SEMES_DAT(出欠月別累積データ)テーブル項目変更対応
                        sumdate            →  項目削除
                        classdays          →  項目名変更 lesson
                        accidentnotice     →  項目名変更 notice
                        noaccidentnotice   →  項目名変更 nonotice
                        late1              →  項目名変更 late
                        early1             →  項目名変更 early

2005/04/27 近大-作業依頼書20041020-01 成績テーブル変更に伴う修正
2005/04/28 納品
2005/06/27 SQL修正
           総合的な学習(SUBCLASSCD='900100')の場合、VALUATION(評定)へGRADE_RECORD(学年成績)の値をセット
           近大-作業依頼書20050626-01
2005/06/27 納品
2005/06/28 総合的な学習(SUBCLASSCD='900100')の場合、GRADE_RECORD(学年成績)に値があれば、GET_CREDIT(標準修得単位)へCREDITS(単位数)の値をセット
2005/06/28 納品
2005/07/06 留年生対応、学籍学習記録データ(WHERE条件より年度をはずし年次を条件に追加してINSERT前にデータをDELETE)
2005/07/06 納品
2005/07/06 留年生対応、学籍出欠記録データ作成(WHERE条件より年度をはずし年次を条件に追加してINSERT前にデータをDELETE)
2005/07/06 納品
2005/07/09 変更依頼対応
                1.日数集計内容の変更
                2.読替処理は行わない。
                3.SCHREG_STUDYREC_DAT(学籍学習記録データ).VALUATION(評定)を更新時、Nullを０に置き換えて更新しない。
                4.ゴミ(不用)科目の成績のデータは生成しない。
2005/07/09 納品
2005/07/11 要出席日数,出席日数の計算時、計算要素NULLが存在する場合、0に置き換えて計算するように変更しました。
           OFFDAYS(休学日数),ABROAD(留学日数)を算出更新時、更新対象外のレコードをNULLで更新していましたので、
           更新対象レコードのみの更新へ修正しました。
2005/07/12
        1.集計日付の内容変更。
        2.留学、休学はschreg_attendrec_datの集計日付までの集計へ変更。
        3.総合学習は、VALUATION(評定)を学年成績の値で更新しない。へ変更。
2005/07/12 納品
2005/07/13 集計日付修正
2005/07/13 総合学習の修得単位更新の判定条件変更
2005/07/14 未受講データ(ゴミデータ)は作成しないの抽出条件を変更。

2005.10.03 ALP修正：OFFDAYS(休学日数),ABROAD(留学日数)を
                    attend_semes_datのOFFDAYS(休学日数),ABROAD(留学日数)から集計するように変更
2006/03/24 ALP修正：中学のときは、KIN_RECORD_DATのGRADE_ASSESSから取り込む。
----------以下、CVSで管理後のコメント----------
$Id: readme.txt 56580 2017-10-22 12:35:29Z maeshiro $
2006/07/07 o-naka (コンボボックス)生徒取得のＳＱＬについて、annualをgradeに修正した。
           o-naka ＤＢエラー(SQL0803N)のため、ＳＱＬを修正した。
                  指示画面にて、以下の通り実行したら、ＤＢエラー（SQL0803N）になった。
                  (「勤怠データ」「過年度も含めて生成」「2学年」「A01組」「0020」「20041040」)
2006/07/18 o-naka 指示画面にて、以下の通り実行した場合、過年度の集計日付の不具合を修正した。
                  (「勤怠データ」「過年度も含めて生成」)
           o-naka 学籍出欠記録データの生成のＳＱＬを修正した（annual→grade）
           o-naka echoコマンド行をコメントにした。
           o-naka 学籍学習記録データの生成のＳＱＬを修正した（annual→grade）
2006/11/29 o-naka 学籍学習記録データの生成のＳＱＬを修正した。（中学の場合、選択科目の時は、評定が '１' でも単位数は取込む）
2007/04/13 o-naka テーブル変更に伴う修正。schreg_studyrec_datに履修単位（comp_credit）を追加

2011/09/21  1.プログラムＩＤを変更（KNJE061 → KNJE061K）

2012/02/23  1.出力条件のコースのコンボボックスの枠を全角15文字まで表示されるよう修正
            2.出力条件のコースのコンボボックスの枠を元に戻し（全角10文字程度）、コース名の長さによってコンボの長さが変わるように修正
            
2012/03/20  1.コースコンボボックスのサイズを全角11文字程度に修正

2012/07/17  1.教育課程の追加、追加に伴う修正
            -- Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応

2013/01/12  1.教科の教育課程CD削除

2013/03/22  1.「○観点データ」の生成処理を追加
            -- プロパティKNJE061_JVIEWSTAT_RECORD_DAT=1の時、「○観点データ」を表示
            -- [更新テーブル]
            -- ・JVIEWSTAT_SUB_DAT
            -- [参照テーブル]
            -- ・JVIEWNAME_GRADE_YDAT
            -- ・JVIEWNAME_GRADE_MST
            -- ・JVIEWSTAT_RECORD_DAT
            -- ・名称マスタ「D028」
            
2013/08/28  1.DI_CD'19','20'ウイルス/DI_CD'25','26'交止追加に伴う修正
            -- rep-attend_semes_dat.sql(rev1.9)
            -- rep-attend_subclass_dat.sql(rev1.11)
            -- v_attend_semes_dat.sql(rev1.7)
            -- v_attend_subclass_dat.sql(rev1.4)
            -- v_school_mst.sql(rev1.20)

2014/03/10  1.更新時のロック機能(レイヤ)を追加

2014/03/28  1.更新時のロック機能(レイヤ)修正

2014/04/25  1.更新時のロック機能(レイヤ)はプロパティ「useFrameLock」= '1'の時、有効

2014/06/30  1.科目合併処理変更(SUBCLASS_REPLACE_DAT → SUBCLASS_REPLACE_COMBINED_DAT)

2016/05/19  1.仮評定フラグのコピーを追加
            -- useProvFlg = '1'の時、
            -- RECORD_PROV_FLG_DATからSTUDYREC_PROV_FLG_DATへコピー

2016/07/04  1.課題研究(D065)の処理を追加
            2.課題研究(D065)の処理を追加

2021/02/02  1.CSVメッセージ統一(SG社)

2021/03/19  1.コード自動整形
            2.総合的な探究の時間900200は総合的な学習の時間900100と同様に扱う