# kanji=漢字
# $Id: readme.txt 73121 2020-03-19 00:30:12Z nakamoto $

/*** KNJE063調査書・指導要録データ修正readme.txt***/

2006/09/07 m-yama   新規作成(処理：東京都KNJE062　レイアウト：東京都KNJE062参考)
2006/09/13 m-yama   レイアウトの調整、教科変更時に科目名称以下をブランク表示にした。
2006/09/14 m-yama   教科変更時に科目コードをブランク表示にした。
                    同年次の複数年度チェックを追加した。
2006/09/15 m-yama   データの存在しない項目の、削除用チェックボックスは使用不可にした。
                    年度、年次、教科に必須マーク(※)を追加した。
                    在籍中、在籍前、資格データonMouseOver時に各項目の説明をチップヘルプで表示する。
                    転入、編入の表示を追加した。

2006/09/26 m-yama   チップヘルプの文言を変更した。
                    資格データを高認試験に変更した。
                    資格データの評定と増加単位と在籍前の増加単位は、入力不可。
2006/09/27 m-yama   0年度、0年次登録時のチェック処理を追加した。
                    テーブル変更に伴う修正をした。
2006/09/29 m-yama   単位→修得単位に変更した。

2007/04/17 m-yama   テーブル変更に伴う修正をした。
                    -- 履修単位の追加。
                    履修単位は、常に入力可に修正した。
2007/10/15 o-naka
★ 右下画面の教科名コンボボックスを教科コード順にするようにした。
-- SQL文レベルで順序を指定する（order by句）
★ 以下の通り変更した。
-- 右上画面のリストの「科目名」欄に
-- 科目コードしか出力されていないので、
-- 科目名も表示されるよう変更する。
-- ※詳細
-- ・学籍学習記録データの科目コードが科目マスタに存在する場合、
--   科目マスタの科目名を表示する。
-- ・学籍学習記録データの科目コードが科目マスタに存在しない場合、
--   学籍学習記録データの科目名を表示する。
★ 以下の通り修正した。
-- 以前に修正した内容（履修単位の追加）を変更する。
-- まず、「履修単位」欄を削除した。
-- 次に、単位について、現在の処理は以下のようになっている
-- ・「修得単位」欄に入力された値
--    → 学籍学習記録データの「修得単位（GET_CREDIT）」に登録
-- ・「増加単位」欄に入力された値
--    → 学籍学習記録データの「増加単位（ADD_CREDIT）」に登録
-- 以下のような処理を追加する
-- ・「修得単位」欄に入力された値と「増加単位」欄に入力された値を足した値
--    → 学籍学習記録データの「履修単位（COMP_CREDIT）」に登録
2007/10/17 o-naka
★ 以下の通り修正した。
-- 前回に修正した内容（履修単位欄がないパターン）を元（履修単位欄があるパターン）に戻した。
2007/10/19 o-naka
★ 「履修単位」欄の追加について、以下の通り修正した。
-- ●「履修単位」の値を実際のテーブル
--   （SCHREG_STUDYREC_DATのCOMP_CREDIT）に登録する際、

--  a.「履修単位」欄がNULLあるいはゼロの場合
--          （「修得単位」欄の値 ＋「増加単位」欄の値）を登録する。

--  b.「履修単位」欄にゼロ以外の値が入力されている場合
--      ・「修得単位」欄の値 ＋「増加単位」欄の値 ≦ 「履修単位」欄の値 の場合
--          「履修単位」欄に登録された値を登録する。

--      ・「修得単位」欄の値 ＋「増加単位」欄の値 ＞ 「履修単位」欄の値 の場合
--          （「修得単位」欄の値 ＋「増加単位」欄の値）を登録する。

-- ※修得単位も増加単位も、画面上でNULLの場合は計算の対象にしない
2007/10/31 o-naka
★ 右上画面のリストの「単位合計」欄の計算から「履修単位」は省く
-- 変更前：「修得単位」＋「増加単位」＋「履修単位」
-- 変更後：「修得単位」＋「増加単位」

2010/01/06  1.科目コード、評定、修得単位、増加単位、履修単位 は半角数字のみの入力チェック追加
            2.備考を40文字入力可能に修正

2010/07/28  1.学年制は、同一年次の複数年度/同一年度の複数年次 のチェック処理をしない

2010/08/02  1.年次のみが抽出の条件だったので、年度も追加した。

2010/08/27  1.出欠・成績データのロックの対応

2011/03/25  1.備考の入力文字数を変更した。

2011/10/04  1.評価/修得単位/増加単位/履修単位が未入力でも登録可能とする。

2011/12/21  1.チェック処理修正

2011/12/26  1.高認は、評価/修得単位/増加単位/履修単位が未入力での登録不可

2012/04/10  1.出欠・成績データのロックの仕様変更
            -- 変更前：LAST_OPI_SEQ の値があればロックする
            -- 変更後：CHAGE_OPI_SEQ の値があればロックする

2012/07/24  1.教育課程の追加、追加に伴う修正
            -- Properties["useCurriculumcd"]=1のときのみ、教育課程処理に対応

2013/01/12  1.教科の教育課程CD削除
            2.修正
            3.修正

2013/01/15  1.右画面の上段教科表示を修正
            2.修正

2013/03/12  1.更新チェックボックスの追加

2013/03/23  1.更新時チェックボックスのチェック処理追加

2013/08/05  1.仮評定チェックボックス追加
                - ON 時はPROV_FLG='1'をセット
                - OFF時はSTUDYREC_PROV_FLG_DATのデータ削除
                
2013/08/09  1.在籍中のみに仮評定ボックスを表示するよう修正
            2.登録リストに仮評定の項目追加

2013/08/12  1.更新、削除チェックボックス有無のエラーメッセージ修正

2013/09/02  1.修正

2013/09/05  1.仮評定の追加
            -- Properties["useStudyrecProvFlgDat"]=1のときのみ、仮評定に対応

2014/03/21  1.評定0を入力可能となるよう修正

2014/08/07  1.Properties["useStudyrecProvFlgDat"]→Properties["useProvFlg"]に変更

2014/08/27  1.ログ取得機能追加

2015/03/11  1.プロパティーknje063NoCheckStudyrecSameYearDiffAnnualが1の場合、同じ年次で異なる年度の追加のチェックをしない

2015/03/23  1.有効フラグ追加

2015/04/16  1.文言変更
            2.無効なデータは、ピンクで表示する。

2015/05/11  1.有効フラグの設定がない科目で留年時の成績はピンクで表示する。

2016/07/04  1.課題研究(D065)の処理を追加

2016/09/21  1.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2017/08/04  1.留年時の成績はピンク表示について、前籍校の成績を留年判定対象から除いた

2017/08/08  1.年次が00かつ年度が0000以外のデータを更新しようとした際、「前籍校の成績は前籍校成績データ入力で更新してください。」メッセージを表示し更新しない

2017/10/11  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind
            2.右画面上段の選択時の、色変更処理を修正

2019/04/11  1.プロパティknje063showValuationCreditNoteが1の場合、評定単位の表記文言を表示する

2019/07/12  1.チップヘルプの表示位置を修正

2019/10/31  1.ＣＳＶ処理ボタン追加

2019/11/11  1.「ＣＳＶ処理」ボタンを「備考欄のＣＳＶ処理」ボタンに修正
            2.一覧の上部に「備考欄のＣＳＶ処理」ボタンを追加

2019/12/25  1.仮評定チェックボックス="off"で更新した場合、STUDYREC_PROV_FLG_DATのレコードを削除するよう修正

2020/03/18  1.実行履歴を追加
            -- schreg_studyrec_exec_hist_dat.sql(rev.73034)
            -- schreg_studyrec_detail_exec_hist_dat.sql(rev.73081)
            -- studyrec_prov_flg_exec_hist_dat.sql(rev.73034)
            -- studyrecremark_exec_hist_dat.sql(rev.73034)
            ※島根案件から要望

2020/03/19  1.文言”＜実行履歴＞”を追加

2021/02/22  1.コード自動整形
            2.プロパティーknje063UseAnotherSubclassMstが1の場合、前籍校の成績の教科名・科目名は前籍校教科マスタ・前籍校科目マスタを優先する
            
2021/03/10  1.京都PHPバージョンアップ対応
