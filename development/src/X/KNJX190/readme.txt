# kanji=漢字
# $Id: readme.txt 76647 2020-09-09 07:38:05Z arakaki $
/*** KNJX190 調査書所見(進学用)CSV取込(HEXAM_ENTREMARK_DAT) readme.txt***/

2006/11/07 m-yama   新規作成(処理：東京都KNJX160　レイアウト：東京都KNJX160参考)

2008/08/08 CSV取込み時の在籍学籍番号とのチェックの追加

2008/08/25 CSV取込み時の年次のチェックの修正

2009/10/27  1.テーブル変更に伴う修正(鳥取の時のサイズを変更)
            ・rep-hexam_entremark_dat.sql-1.5

2009/10/30  1.「指導上参考」は「prgInfo.properties」の
              「tyousasyoTokuBetuFieldSize」が「1」の時 615 ⇒ 861

2009/11/16  1.文字数の修正
            -- 「prgInfo.properties」の「tyousasyoTokuBetuFieldSize」が「1」の時
            -- 「SPECIALACTREC」、「全角88文字」  ⇒ 「全角150文字」
            -- 「TRAIN_REF」、    「全角205文字」 ⇒ 「全角406文字」
            2.「prgInfo.properties」の「useSyojikou3」が「1」の時の処理追加したが、コメントアウトとする。

2009/12/29  1.2009/11/16 2.のコメント化を外した。

2010/01/08  1.csvヘッダを下記のように修正
            ・指導上参考１ －＞ 学習／行動の特技・特徴等
            ・指導上参考２ －＞ 部活動・資格取得等
            ・指導上参考３ －＞ その他

2010/05/21  1.フィールド追加(TOTALSTUDYACT、TOTALSTUDYVAL)に伴う修正

2010/06/28  1.改行コードを「↓」に置き換える修正
            --「総合学習活動」「総合学習評価」はプロパティーファイルを参照するよう修正

2010/07/07  1.「useSyojikou3」の値に関係なく「TRAIN_REF」4つ入出力するよう修正

2010/07/16  1.「年組」コンボに権限チェック追加
            2.権限チェックの修正(呼出下のIDでチェック)
            3.3分割の桁数をプロパティーファイルで変更できるよう修正

2010/07/22  1.「特別活動の記録」のサイズをプロパティーで変更できるように修正

2010/07/28  1.「出欠の記録備考」「活動内容」「評価」のサイズの初期値修正

2010/07/28  1.CSV処理の「卒業生」に対応

2010/07/29  1.「卒業生」「在学生」のデータ保持の不具合修正

2010/09/29  1.指定した生徒の高校の全年度分を出力するように修正
            2.年組コンボボックスは高校のみに修正
            3.高校在籍の年度チェックを追加した。

2011/03/03  1.XLS出力処理追加
            -- プロパティー追加：useXLS(何かセットされていれば、XLS出力。基本'1'をセット。)

2011/03/04  1.3分割の行数をプロパティー「train_ref_1_2_3_gyo_size」で変更できるよう修正した。

2011/03/18  1.テンプレートを1本に統一

2011/03/30  1.以下の修正をした
            -- 単独で呼び出された場合閉じる
            -- 親から呼ばれた場合は、親の権限を使用する
            2.修正

2011/04/01  1.テンプレートのパス修正

2011/04/07  1.タイトルの固定文字「(1.1)」を削除した。

2011/04/12  1.文字数チェックをバイトチェックに変更した。

2011/05/11  1.ヘッダ例の文字数を可変に

2011/05/27  1.権限チェック修正
            2.権限チェック修正

2013/06/21  1.CSVの項目数チェックを追加

2013/08/14  1.指導上参考となる諸事項の3分割の各項目はProperties["train_ref_1_2_3_field_size"] = 2の時、21文字/21文字/7文字までとなるように修正

2013/08/21  1.帳票が禁則処理を設定している場合、所見にスペースにつづいて長音（ー）を含むかチェックする処理を追加

2013/09/13  1.権限チェックを修正した

2013/09/18  1.所見データがなくても名簿を出力するように修正

2014/06/02  1.更新/削除等のログ取得機能を追加

2015/07/14  1.Properties["train_ref_1_2_3_field_size"]を'-'区切りで設定できるよう修正（指導上参考となる諸事項の3分割の各項目）

2016/09/26  1.年度学期コンボ、データ出力の条件に校種'H'のみを追加

2018/12/12  1.年組コンボの「全て」をカット

2019/01/18  1.CSV出力の文字化け修正(Edge対応)

2020/01/31  1.プロパティtyousasyo2020が1の場合、調査書A4フォームへの変更にともなう修正
            ・指導上参考となる諸事項6分割はHEXAM_ENTREMARK_TRAINREF_DAT(TRAIN_SEQ 101～106)を使用する
            ・備考はHEXAM_ENTREMARK_REMARK_HDATを使用する

2020/03/26  1.プロパティtyousasyo2020をパラメータに変更

2020/06/25  1.諸事項6分割の出欠備考文字数を8文字5行から8文字7行に変更
            2.1行が4096バイト以上の場合のエラー判定修正

2020/06/26  1.特別活動の記録の文字数を変更

2020/09/09  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/11/19  1.島根県用のプロパティtyousasyo_shokenTable_Seqが1の場合の処理追加
              CSV項目に「パターン」を追加し、xxx_SEQ_DATのテーブルから出力、更新を行う。

2020/12/08  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを
              設定ファイル「prgInfo.properties」のプロパティー「csv_LastColumn」で
              切り替えるように変更

2020/02/12  1.PHP7のエラー修正

2020/02/17  1.卒業生入力の場合、島根県用のプロパティtyousasyo_shokenTable_Seqが1でもパターンコンボを使用せずxxx_SEQ_DATのテーブルを使用しない

2021/03/17  1.CSVメッセージ統一(SG社)

2021/04/26  1.CSVメッセージ統一STEP2(SG社)