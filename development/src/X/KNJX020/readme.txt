# kanji=漢字
# $Id: e9bd2473cced1fb795f65965567e21082ac5d023 $

2005.05.09 仕様変更：入学区分と卒業区分について、値チェックをしない。名称マスタの存在チェックをする。
2005/09/28 CSV書出にて、最終項目にダミー項目を追加・・・「１６行目以降のカンマが消える」の対応策として修正
2005/10/18 テーブル変更(緊急連絡先等)に伴う修正

2007/05/21 NO001 m-yama   テーブル変更に伴うチェック処理を追加した。

2009/08/27  1.「その他」「国籍」を追加

2010/03/23  1.ヘッダの見本を修正した。

2010/04/01  1.「戸籍氏名」、「戸籍氏名かな」を追加した。
            2.「生徒氏名」、「生徒氏名かな」の桁数チェックを変更した。

2010/04/16  1.「その他」「国籍」の項目は頭ゼロ埋めの3桁として処理するよう修正

2010/05/10  1.「その他」「国籍」の、データ有りの場合のみ、ゼロ埋めするよう修正

2010/09/21  1.入学卒業履歴データの更新を追加した。
            2.学籍基礎データの入学・卒業情報は入学卒業履歴データの最新を更新するよう修正した。

2011/01/13  1.新規登録時の処理修正

2011/02/18  1.XLS出力処理追加
            -- プロパティー追加：useXLS(何かセットされていれば、XLS出力。基本'1'をセット。)

2011/02/28  1.encoding指定

2011/03/18  1.テンプレートを1本に統一

2011/03/30  1.以下の修正をした
            -- 単独で呼び出された場合閉じる
            -- 親から呼ばれた場合は、親の権限を使用する

2011/04/01  1.テンプレートのパス修正

2011/04/07  1.タイトル文言をプロパティー「useXLS」で切り替えるよう修正した。

2011/08/10  1.CSV処理に入学年度を追加
               - schreg_end_grd_hist_datのCURRICULUM_YEARフィールドを更新する
               - 取り込み時の入学年度は必須項目

2011/09/06  1.取り込み時の入学年度の必須チェックをカット。
            -- 必須記号「※」もカット。
            2.項目名「入学年度」を「課程入学年度」に変更。
            3.項目名「校種」に必須記号「※」を追加。
            -- ヘッダ出力は「※」があり、データ出力は「※」がなかった。

2012/02/09  1.テーブル変更に伴う修正
            -- schreg_base_detail_mst_rev1.1.sql
            -- rep-schreg_ent_grd_hist_dat_rev1.2.sql
            -- v_schreg_base_mst_rev1.1.sql

2012/03/19  1.CSV項目「受験番号」追加に伴い修正
            -- SCHREG_BASE_DETAIL_MSTのBASE_SEQ=003のBASE_REMARK1

2013/04/03  1.受験番号のサイズを可変にする。(プロパティー：examnoLen)" 

2013/12/11  1.住所のサイズ変更等に伴う修正
            -- rep-schreg_base_mst_rev1.9.sql
            -- rep-schreg_ent_grd_hist_dat_rev1.4.sql

2013/12/26  1.プロパティー「useAddrField2」を追加した。
            -- '1'がセットされている場合は追加分の住所2を使用する。

2013/12/26  1.データ取込での、カウンタ不具合修正

2014/02/21  1.課程入学年度がNULLかつ入学日付が存在する場合、入学日付より課程入学年度を算出し取込む

2014/06/19  1.ログ取得機能追加

2014/07/03  1.useAddrField2追加時の不具合修正

2016/12/19  1.校種対応

2017/05/25  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2017/10/17  1.プロパティーuseFinschoolcdFieldSizeが12ならコードの0埋め、チェックを12桁でおこなう

2017/12/11  1.急用連絡先に電話番号2、電話番号備考を追加

2018/05/08  1.取込時「英字氏名」の "_" を "," に変換して登録、
            --出力時「英字氏名」の "," を "_" に変換して出力するよう修正

2018/05/10  1.2018/05/08修正を破棄

2018/11/02  1.入学卒業履歴データの最新データ取得の時の不具合修正
            2.データ出力に学籍番号の範囲指定追加

2019/01/18  1.CSV出力の文字化け修正(Edge対応)

2019/02/27  1.ＣＳＶ出力時は改行を"↓"に変換する。取込は"↓"を改行に変換する。

2019/05/14  1.「教室コード」追加

2019/08/21  1.データ取込/データ出力にて、use_prg_schoolkindプロパティが立っている場合のみ、校種を利用するよう、変更
            --プロパティー参照：use_prg_schoolkind
            2.リビジョンをrev. 67435に戻した。

2019/08/26  1.入力可能校種を名称マスタから取得するよう修正

2020/09/07  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/11/12  1.プロパティー「NAME_INPUT_SIZE」に値が設定されている時、氏名、戸籍氏名、緊急連絡先氏名1/2の入力文字数がこのプロパティ値以下かチェックするよう、変更
              ※未設定時は既存値。
            2.プロパティー「chkNameInputHankaku」= 1の時、氏名、戸籍氏名、緊急連絡先氏名1/2に半角文字が混ざっていないか、チェックするよう、変更
              -- プロパティー「NAME_INPUT_SIZE」追加
              -- プロパティー「chkNameInputHankaku」追加

2020/12/01  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを
              設定ファイル「prgInfo.properties」のプロパティー「csv_LastColumn」で
              切り替えるように変更

2021/01/06  1.プロパティー「Origin_hyouji」= 1の時、「出身コード」を追加

2021/03/10  1.京都PHPバージョンアップ対応

2021/03/11  1.CSVメッセージ統一(SG社)

2021/03/22  1.京都バージョンアップと、SG社修正分が混在したのでSG社の修正分で復帰
            2.プロパティ「useSpecial_Support_School」=1のとき、「その他」の項目名を「教育区分」と表示するよう修正

2021/04/12  1.入学理由(ENT_REASON) のサイズ変更に伴う修正(75バイト→120バイト)
