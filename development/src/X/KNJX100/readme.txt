# kanji=漢字
# $Id: readme.txt 76504 2020-09-07 08:27:55Z arakaki $
2005.05.25 nakamoto 実施区分のチェックは、更新時のみとする
2005/09/28 CSV書出にて、最終項目にダミー項目を追加・・・「１６行目以降のカンマが消える」の対応策として修正
2007/08/22 nakamoto 時間割データを取り込む際、SCH_CHR_COUNTFLGを作成する処理を追加した。

---- ↓ 仕様 ↓ -----------------------------------------------------------
時間割データを取り込む際、講座データ(CHAIR_DAT.COUNTFLG)が「集計しない(0)」
となっていたら、その年組数分の SCH_CHR_COUNTFLG を作成する。
(「集計しない」な SCH_CHR_COUNTFLG を作成する)

尚、現時点(*1)では「群」の場合は、その対象外とする。
(群なデータの SCH_CHR_COUNTFLG は作成しない)

(*1) 別に群でもレコードを作成して構わないが、
・工数、PGの複雑度
・お客さんへの有益性
を考慮すると、群は無視した方が良いと判断。
要望があれば対応すれば良い。

例えばCSVファイルの1行目と千行目の2レコードが同じ群だった場合、
1行目で作ったSCH_CHR_COUNTFLG レコードと千行目のレコードが
重複する。重複した場合、無視するか強制上書きするか…。
---- ↑↑↑↑↑------------------------------------------------------------

2009/06/09  1.SCH_CHR_COUNTFLGを作成する処理を変更した。

---- ↓ 仕様変更2009/06/09 ↓ -----------------------------------------------------------
時間割データを取り込む際、講座データ(CHAIR_DAT.COUNTFLG)を参照し、
その年組数分の SCH_CHR_COUNTFLG を作成する。

・「集計しない(0)」「集計する（1）」すべてを対象とする。
(「集計しない(0)」「集計する（1）」な SCH_CHR_COUNTFLG を作成する)

・「群でない（0000）」「群（XXXX）」すべてを対象とする。
(「群でない（0000）」「群（XXXX）」な SCH_CHR_COUNTFLG を作成する)

・重複した場合、強制上書きする。
---- ↑↑↑↑↑------------------------------------------------------------


2009/12/29  1.「年度＆学期」コンボボックスを追加した

2010/06/15  1.フィールド追加に伴い修正。
            -- 授業形態(SCH_CHR_COUNTFLG.LESSON_MODE)
            -- 固定値'00'で更新する。
            ※ rep-sch_chr_countflg_rev1.3.sql

2011/02/24  1.リファクタリング
            2.XLS出力処理追加
            -- プロパティー追加：useXLS(何かセットされていれば、XLS出力。基本'1'をセット。)

2011/02/28  1.encoding指定

2011/03/18  1.テンプレートを1本に統一

2011/03/30  1.以下の修正をした
            -- 単独で呼び出された場合閉じる
            -- 親から呼ばれた場合は、親の権限を使用する

2011/04/01  1.テンプレートのパス修正

2011/04/07  1.タイトルの固定文字「(1.1)」を削除した。

2011/05/24  1.データ取込で '削除' の場合、以下のテーブルも削除する。
            -- SCH_CHR_TEST
            -- SCH_CHR_HRATE_DAT
            -- SCH_STF_DAT
            -- SCH_FAC_DAT

2011/06/17  1.W_CSVMSG_PRG_DAT作成に伴う修正

2011/06/22  1.拡張子チェック追加

2011/10/14  1.実施日付、講座コンボボックス、データ出力、データ取込に「データ区分：2」を除く条件を追加した。
            2.データ取込の更新のとき、データ区分は更新対象から外した。
            3.データ取込のときは"SCH_CHR_TEST"を削除するようにした。
            4.データ取込の削除処理で、関連テーブル削除に"SCH_CHR_COUNTFLG"も追加した。
            5.データ取込の削除処理の再確認メッセージを変更した。
            6.データ取込の処理終了メッセージを変更した。

2011/10/18  1.データ取込の削除処理で、関連テーブル削除に"ATTEND_DAT"も追加した。

2011/10/19  1.データ取込にチェックボックスを追加した。
            -- 処理名が更新の場合、□テスト時間割も通常時間割として更新する
            -- 処理名が削除の場合、□テスト時間割も削除する

2011/11/08  1.UNIT_SCH_CHR_RANK_DATの更新処理追加

2014/07/02  1.ログ取得機能追加

2016/09/21  1.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2017/09/14  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            -- プロパティー追加：use_prg_schoolkind

2019/01/18  1.CSV出力の文字化け修正(Edge対応)

2020/09/07  1.CSV DUMMYの名称をLASTCOLUMNに修正

2020/12/07  1.リファクタリング
            2.CSVの最終列をDUMMYかLASTCOLUMNで扱うかを
              設定ファイル「prgInfo.properties」のプロパティー「csv_LastColumn」で
              切り替えるように変更

2021/02/22  1.CSVメッセージ統一(SG社)

2021/03/10  1.京都PHPバージョンアップ対応
