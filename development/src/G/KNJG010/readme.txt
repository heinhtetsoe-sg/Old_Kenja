// kanji=漢字
// $Id: f6c9db23e7c5df7d1d84f9272b3ee91e0239c87c $

2005.05.10 nakamoto 卒業生が表示されない不具合を修正。
2005.06.09 nakamoto 印刷パラメータ(入力時ＯＳ選択)を追加・・・hiddenで渡す=1:XP
2005.06.09 nakamoto 記載責任者に「変更有」チェックボックスを追加(チェックされている場合、指定された記載責任者に変更する)
2005.10.22 nakamoto 保存ボタン押し下げ後の「証明書の発行対象者チェック」に転学(3)を追加。
2005.11.18 nakamoto NO001:帳票へ渡すパラメータに、今年度(CTRL_YEAR)を追加
2006.09.19 nakamoto 未履修科目出力ラジオを追加した。
2006.09.22 nakamoto ６年用フォーム選択チェックボックスを追加した。

2008/04/14  1.readme.txt以外のIdを削除
            2.証明書コンボのLABELを変更

2008/05/28  1.検索画面のウィンドウサイズを指定する。

2008/08/27  1.ログイン年度の表示の不具合を修正した。

2008/09/02  1.証明書発行番号は、「1:印刷なし」の時は付番しない。

2008/09/03  1.証明書発行区分・証明書発行日付は、「1:印刷なし」の時は更新しない。
            2.単位制の場合、「フォーム選択(調査書・成績証明書のみ)」という文言にする。

2008/09/08  1.右記の修正を元に戻した（キャンセルした）。「証明書発行区分・証明書発行日付は、「1:印刷なし」の時は更新しない。」

2009/04/01  1.熊本は３年用フォームと表示、熊本以外は６年用フォームと表示

2009/04/13  1.「評定読替」項目を画面上から削除。
            2.「履修のみ科目出力　する／しない」のラジオボタンを追加。
            3.「未履修科目出力」が「する」になっている状態で、「履修のみ科目出力」で「しない」が選択された場合、メッセージ表示し「する」が選択されている状態にする。

2009/07/22  1.HEXAM_ENTREMARK_DAT変更に伴う修正

2009/08/25  1.熊本と鳥取だけ３年用フォームと表示するよう修正

2009/11/30  1.prgInfo.propertiesのcertifNoSyudouが、１の場合に発行番号を手動で指定出来るように修正

2009/12/01  1.prgInfo.propertiesのcertifNoSyudouが、１の場合に発行番号を手動で指定出来るように修正

2009/12/03  1.CERTIF_DETAIL_EACHTYPE_DATのTYPEは、固定'1'をセット
            2.削除処理でCERTIF_DETAIL_EACHTYPE_DATも削除
            3.CERTIF_KINDCD < '100'が対象

2009/12/10  1.パラメータ追加。プロパティーファイルのKnje080UseAFormを渡す。

2009/12/12  1.学習成績概評チェックボックスの初期値を"on"に変更した。
            2.未履修科目出力ラジオボタンの初期値を「しない」に変更した。

2009/12/17  1.履修のみ科目が出力されない不具合を修正
            -- 履修のみ科目出力の印刷パラメータを帳票プログラムへ渡していなかった。

2010/01/07  1.prgInfo.propertiesのcertifNoSyudouが、１の場合に発行ボタンでも、発行番号を手動で指定出来るように修正

2010/01/08  1.文字修正「処理日付」⇒「発行日付」、保存ボタンを押しても「印刷パラメータ」の値を保持するよう修正

2010/01/22  1.「発行番号」の値をDB値を使うか、そのままの値を使うかはプロパティーファイルで振り分ける処理追加

2010/02/08  1.「表示」コンボで「発行済み(卒業生)」、「発行済み(在学生)」を選択した時の帳票へ渡すパラメーターの修正

2010/02/18  1.「表示」コンボが「未発行の依頼」でcertifNoSyudou = 1のとき、発行番号が'0'、'null'の時は入力不可とする。
            2.knjg010Form3.jsにも同様の修正追加
            3.上記の修正を取り消し、「表示」コンボが「未発行の依頼」でcertifNoSyudou = 1のとき「発行番号」は入力可とする。

2010/03/25  1.パラメータの追加tyousasyoAttendrecRemarkFieldSize

2010/06/10  1.「評定読替」チェックボックスの復活

2010/07/08  1.パラメーター追加(gaihyouGakkaBetu)

2010/07/14  1.「３年用フォーム」と「６年用フォーム」の表示をプロパティーの値で切り替える

2010/07/20  1.パラメーター追加(train_ref_1_2_3_field_size、3_or_6_nenYoForm、tyousasyoSougouHyoukaNentani)

2010/07/21  1.「○年用フォーム」の値修正

2010/07/30  1.調査書入力で使っている値をパラメータに追加

2010/08/27  1.近大の場合、「未履修科目出力」、「履修のみ科目出力」を非表示にした。

2010/09/03  1.「未履修科目出力」、「履修のみ科目出力」が非表示の際におこる不具合を修正した。

2010/09/13  1.以下の２つの帳票パラメータを追加。hiddenで渡す。
            -- 総合的な学習の時間の単位を０表示
            -- 留学の単位を０表示
            -- ※２つともプロパティーファイルのtyousasyoTaniPrintを渡す。

2010/09/24  1.パラメータの追加「tyousasyoKinsokuForm」

2010/10/19  1.パラメータの追加「DOCUMENTROOT」

2011/03/01  1.GRD_DATE,GRD_DIVを参照するテーブルを変更。
            -- 該当生徒の学籍番号がGRD_BASE_MSTに存在しない場合、
            --     変更前：SCHREG_BASE_MSTのGRD_DATE,GRD_DIVを参照。
            --     変更後：SCHREG_ENT_GRD_HIST_DATのGRD_DATE,GRD_DIVを参照。

2011/08/04  1.調査書で何年用フォームを使うかの判定に名称マスタ「Z001」のNAMESPARE2を追加した。

2012/01/12  1.評定読替のチェックボックスの初期値をチェック有りに修正

2012/01/20  1.学生を選択できなくなる不具合を修正
            2.評定のチェックが外れる不具合を修正
            3.表示コンボに関係なく評定のチェック状態を保持するように修正

2012/03/23  1.その他住所を優先するチェックボックスを追加した。

2012/06/13  1.パラメータに「useCurriculumcd」を追加した。

2012/08/01  1.パラメータの追加tyousasyoEMPTokuBetuFieldSize

2012/08/02  1.証明書種類コンボのソートを修正

2013/03/05  1.出欠日数（調査書のみ）前籍校を含まないチェックボックスとパラメータ「tyousasyoNotPrintAnotherStudyrec」を追加した。

2013/04/30  1.パラメータに「seisekishoumeishoTaniPrintRyugaku」を追加した。

2013/06/27  1.パラメータ「useClassDetailDat」追加

2013/08/16  1.「その他住所を優先して印字する」チェックボックスの初期値修正（名称マスタ「Z001」のNAMESPARE3’1’は、通信制は、初期値をチェックあり）

2013/09/09  1.発行番号の重複チェックを追加（prgInfo.propertiesのcertifNoSyudouCheckでコントロール）

2013/12/26  1.パラメータuseAddrField2、useProvFlgを追加

2014/01/14  1.パラメータuseGakkaSchoolDivを追加

2014/01/23  1.パラメータuseAddrField2を追加

2014/02/26  1.印刷パラメータを保存するよう修正
            2.文言修正

2014/02/27  1.レイアウト修正、記載責任者チェックボックスをカット
            2.CERTIF_DETAIL_EACHTYPE_DATへ印刷パラメータを保持するフィールド先および値を変更
            3.更新処理追加
            
2014/02/28  1.発行番号重複チェック処理修正
            2.更新時のREGISTERCD、UPDATEDフィールド更新追加
            
2014/03/24  1.記載責任者は調査書を選択時のみ利用可とする。
            2.発行済みの場合もパラメータを受け取って表示するよう修正
            3.その他、パラメータ取得時の不具合修正

2014/03/25  1.記載責任者未登録時のデフォルト値設定処理をカット。
            2.選択後、記載責任者を変更し印刷対象に入れた場合に
              コンボの記載責任者をパラメーターにセットする、処理をカット
            3.修正

2014/05/13  1.パラメータtrain_ref_1_2_3_gyo_size追加

2014/05/23  1.発行済みのとき、記載責任者コンボを使用不可に変更

2014/08/08  1.ログ取得機能追加

2014/08/21  1.パラメータtyousasyoNotPrintEnterGrade追加

2015/01/27  1.「入学・卒業日付は年月で表示する(卒業証明書のみ)」チェックを追加しCERTIF_DETAIL_EACHTYPE_DATに保存する処理を追加

2015/01/30  1.文言修正

2015/03/12  1.パラメータseisekishoumeishoNotPrintAnotherStudyrec、tannishutokushoumeishoNotPrintAnotherStudyrec追加

2015/07/15  1.useAssessCourseMstのパラメータを追加

2016/05/10  1.パラメータ「useMaruA_avg」を追加

2016/08/22  1.パラメータ「tyousasyoSyusyokuPrintGappeiTougou」を追加

2016/09/21  1.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2016/09/23  1.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照
            2.校種条件追加
            -- プロパティー「useSchool_KindField」とSCHOOLKINDを参照

2016/09/27  1.９．備考の文字、桁数のプロパティーtyousasyoRemarkFieldSize追加
            2.発行番号の付番方法変更(certif_no_8keta=1の時)

2016/09/28  1.キャンセル処理追加
            -- rep-certif_kind_mst.sql(rev1.3)
            -- v_certif_kind_mst.sql(rev1.3)
            -- rep-certif_detail_eachtype_dat.sql(rev1.3)

2016/09/30  1.修正

2016/10/14  1.発行順テーブル更新処理追加
            -- certif_issue_print_order_dat.sql

2016/10/19  1.キャンセルボタンを左に移動

2016/11/02  1.進路情報入力で調査書発行したデータ（CERTIF_DETAIL_EACHTYPE_DAT.REMARK13）に、証明書種類の前に★を表示する

2016/11/11  1.追加時に表示コンボの値がクリアされる不具合を修正

2016/11/14  1.発行番号の表示追加
            2.ボタン文字変更。学生検索 → 既在籍生

2016/12/28  1.職員番号マスク機能追加
            -- プロパティー「showMaskStaffCd」追加
            -- showMaskStaffCd = 4 | *
            -- この設定だと、下４桁以外は「*」でマスク
            -- 「showMaskStaffCd」が無いときは通常表示

2017/01/05  1.依頼一覧の表示順がCERTIF_INDEX参照のとき、数値に変換してからソートに変更
            2.未発行の依頼の場合、依頼一覧の表示順を変更
            -- 申請日（APPLYDATE）（降順）
            -- 学籍番号（SCHREGNO）（昇順）
            -- 証明書種類（CERTIF_KINDCD）（昇順）
            -- 証明書連番（CERTIF_INDEX）（昇順）

2017/02/17  1.発行番号の付番で３桁(部門)、４桁(CERTIF_DIV)が未設定の場合０とする。

2017/03/15  1.駿台甲府で追加ボタンで卒業生が表示されるように修正

2017/04/12  1.発行済み印刷でcertif_no_8keta='1'の場合、(certifNoSyudou='1'と同様に)発行番号を配列インデクス12にセットする

2017/07/25  1.パラメータtyousasyoUseEditKinsoku追加

2017/09/14  1.ADMIN_CONTROL_PRG_SCHOOLKIND_MSTを使って、校種を制御する。
            --プロパティー追加：use_prg_schoolkind

2017/09/25  1.プロパティーtyousasyoNotCheckGaihyoCommentが1の場合、画面を開いた際に、学習成績概評「学年人数を印刷する。 」をチェックしない

2017/10/19  1.プロパティーknjg010usePrintStampが1の場合、印影出力(調査書、成績証明書、卒業証明書、在学証明書のみ)チェックボックスを追加する

2017/10/24  1.テスト印刷を判別するパラメータ追加
            2.古いIEのjavascriptエラー対応

2017/10/27  1.プロパティーcertifPrintRealName追加

2017/11/28  1.発行ボタンをダブルクリックした際にCERTIF_ISSUE_PRINT_ORDER_DATを2重で作成しないように修正

2018/01/07  1.依頼一覧リストの各項目インデント調整
            2.発行手数料の表示追加

2018/02/20  1.プロパティーtyousasyoHankiNinteiが1の場合、進学用（半期認定）、就職用（半期認定）の選択を追加する

2018/02/21  1.コードの整理
            2.使用していない変数の使用を削除

2018/02/26  1.パラメーターuseShuryoShoumeisho追加
            2.useShuryoShoumeishoが1の場合、卒業証明書の文言を終了証明書に変更

2018/03/01  1.成績証明書で記載責任者を有効化

2018/03/13  1.証明書発行データの発行番号生成の際、既卒区分が1:卒業生でも卒業生在籍データがない場合、在学生用在籍データを使用する。

2018/04/18  1.phpのWarning対応

2018/04/26  1.留学・休学の生徒の卒業見込証明書は卒業予定年月確認メッセージを表示する

2018/06/20  1.出力選択した左の枠に証明書種別を追加

2018/07/30  1.プロパティーtyousasyoPrintCoursecodename追加

2018/08/01  1.javascriptエラー対応

2018/08/22  1.プロパティーseisekishoumeishoPrintCoursecodename、tannishutokushoumeishoPrintCoursecodename追加

2018/10/10  1.プロパティーtyousasyoPrintChairSubclassSemester2追加

2018/10/22  1.調査書でプロパティーtyousasyoHanasuClasscdに設定された教科コードは総合的な学習の時間の上に出力する

2018/10/30  1.調査用プロパティーtyousasyoPrintHomeRoomStaffが1の場合、記載責任者をdisabledに変更

2018/11/16  1.単位修得証明書用プロパティーtannishutokushoumeishoKisaisekininshaが1の場合、記載責任者をdisabled=falseに変更

2018/12/15  1.プロパティーcertif_no_8keta = 1の場合の証明書発行番号のフォーマット指定追加
            -- 以下の使用項目を"+"(スペース追加可)で連結する。
            --     YEAR:[数値] ... 年度。数値は下の桁指定。桁指定が無いもしくは4桁を超える指定は4桁を使用する。
            --     BUMON       ... 部門。1桁。名称マスタ「G005」
            --     CERTIF_DIV  ... 証明書マスタの証明書区分。1桁。
            --     SEQ:[数値]  ... 連番。数値は桁指定。既存の番号+1を使用する。
            --     SCHOOL_KIND ... 校種。証明書マスタの証明書校種を名称マスタ「G008」で変換する。
            --  賢者は年度下2桁、部門1桁、証明書区分1桁、連番4桁。
            --  フォーマットの指定がない場合、賢者を使用する。

2019/02/14  1.プロパティーcertifNoSyudouが1の場合のjavascriptエラー修正

2019/03/21  1.プロパティーtyousasyoJiritsuKatsudouRemark追加

2019/04/13  1.プロパティーchutouKyoikuGakkouFlg追加

2019/06/14  1.プロパティーtyousasyoNoSelectNenYoForm追加

2019/06/25  1.プロパティーtyousasyoSougouHyoukaNentaniPrintCombined追加

2019/06/29  1.プロパティーknjg010PrintGradeCdAsGrade追加

2019/09/05  1.データ追加・更新時javascriptエラー修正

2019/09/09  1.プロパティーseisekishoumeishoCreditOnlyClasscd追加

2019/11/11  1.卒業生検索の文言「既在籍生」を「在籍生以外」に変更
            2.「留学の単位数を0表示」、「総合的な学習の時間の単位数を0表示」選択を追加

2020/05/21  1.プロパティーhyoteiYomikaeが'1_off'の場合、「評定が1の場合は2で処理する。」チェックボックスは表示のみでデフォルトONにしない

2020/08/28  1.証明書番号058調査書6分割を追加

2020/11/12  1.コード自動整形
            2.プロパティーtyousashoPrintStampSelectが1の場合、校長印出力・担任印出力指定チェックボックスを追加する
              プロパティーtyousashoPrintStampSelectが2の場合、校長印出力のみ指定チェックボックスを追加する
                 校長印 CERTIF_DETAIL_EACH_TYPE_DAT.REMARK20
                 担任印 CERTIF_DETAIL_EACH_TYPE_DAT.REMARK21
            3.2.の修正漏れ対応
            4.帳票へのパラメータにCERTIF_INDEXを追加し校長印出力・担任印出力パラメータをカット

2020/11/19  1.文言担任印出力を記載責任者印出力に変更

2020/11/24  1.プロパティーtyousasho2020PrintHeaderNameがcheckの場合、偶数頁の氏名出力チェックボックスを追加する

2020/12/01  1.プロパティーtyousasho2020GvalCalcCheckが1の場合、評定平均の算出指定チェックボックスを追加する

2020/12/07  1.文言修正

2020/12/11  1.印影出力指定の証明書種別に専大松戸を追加

2021/01/27  1.プロパティhyoteiYomikaeRadioが1の場合、評定読替のチェックボックスを「評定読替・切替しない」「評定１を２に読替」「評定１を非表示」のラジオボタンに変更する

2021/02/25  1.プロパティtyousasho2020PrintAvgRank=1の場合、評定平均席次出力する/しないラジオボタンを表示する
            --tyousasho2020GvalCalcCheckが1かつ多重平均選択時のみ活性化

2021/03/15  1.青山学院の印影出力証明書種別指定を追加

2021/04/12  1.2021/01/27の修正不具合対応

2021/04/13  1.プロパティtyousasyo2020EshojikouExtends、tyousasho2020GshojikouExtendsに3ページ出力、2ページ出力指定プロパティが設定されている場合、指示画面に4ページ、3ページ、2ページの選択を追加する
            2.関数名変更

2021/04/14  1.印影出力の証明書種別指定を変更
            2.流経大附属柏高校の印影出力証明書種別指定を追加

2021/05/07  1.プロパティ名tyousasho2020GshojikouExtendsをtyousasyo2020GshojikouExtendsに修正
